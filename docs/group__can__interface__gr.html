<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AME: CAN Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AME
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__can__interface__gr.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CAN Interface</div>  </div>
</div><!--header-->
<div class="contents">

<p>Driver API for CAN Bus Peripheral (Driver_CAN.h)  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__can__status__code__ctrls"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__status__code__ctrls.html">Status Error Codes</a></td></tr>
<tr class="memdesc:group__can__status__code__ctrls"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status codes of the CAN driver. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___c_a_n__unit__events"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_a_n__unit__events.html">CAN Unit Events</a></td></tr>
<tr class="memdesc:group___c_a_n__unit__events"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback unit events notified via <a class="el" href="group__can__interface__gr.html#ga38795d1ed135ce3bd87f31ef1596bccf">ARM_CAN_SignalUnitEvent</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___c_a_n__events"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_a_n__events.html">CAN Object Events</a></td></tr>
<tr class="memdesc:group___c_a_n__events"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback objects events notified via <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__can__control"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__control.html">CAN Control Codes</a></td></tr>
<tr class="memdesc:group__can__control"><td class="mdescLeft">&#160;</td><td class="mdescRight">Codes to configure the CAN driver. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_a_r_m___d_r_i_v_e_r___c_a_n.html">ARM_DRIVER_CAN</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_a_r_m___c_a_n___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_CAPABILITIES</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_a_r_m___c_a_n___s_t_a_t_u_s.html">ARM_CAN_STATUS</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">CAN Message Information.  <a href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_OBJ_CAPABILITIES</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaac07b9fdf614bf439414f5417aaa376e"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#gaac07b9fdf614bf439414f5417aaa376e">ARM_CAN_SignalUnitEvent_t</a>) (uint32_t event)</td></tr>
<tr class="memdesc:gaac07b9fdf614bf439414f5417aaa376e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to <a class="el" href="group__can__interface__gr.html#ga38795d1ed135ce3bd87f31ef1596bccf">ARM_CAN_SignalUnitEvent</a> : Signal CAN Unit Event.  <a href="group__can__interface__gr.html#gaac07b9fdf614bf439414f5417aaa376e">More...</a><br /></td></tr>
<tr class="separator:gaac07b9fdf614bf439414f5417aaa376e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ceceac3e9aa0981c5cacfab88efb4eb"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga7ceceac3e9aa0981c5cacfab88efb4eb">ARM_CAN_SignalObjectEvent_t</a>) (uint32_t obj_idx, uint32_t event)</td></tr>
<tr class="memdesc:ga7ceceac3e9aa0981c5cacfab88efb4eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a> : Signal CAN Object Event.  <a href="group__can__interface__gr.html#ga7ceceac3e9aa0981c5cacfab88efb4eb">More...</a><br /></td></tr>
<tr class="separator:ga7ceceac3e9aa0981c5cacfab88efb4eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4256d5b23ffcb27759a05f8e6b854f13"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga4256d5b23ffcb27759a05f8e6b854f13">ARM_CAN_GetVersion</a> (void)</td></tr>
<tr class="memdesc:ga4256d5b23ffcb27759a05f8e6b854f13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get driver version.  <a href="group__can__interface__gr.html#ga4256d5b23ffcb27759a05f8e6b854f13">More...</a><br /></td></tr>
<tr class="separator:ga4256d5b23ffcb27759a05f8e6b854f13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga35f21cabe1637b1be964024a8f77721c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_a_r_m___c_a_n___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_CAPABILITIES</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga35f21cabe1637b1be964024a8f77721c">ARM_CAN_GetCapabilities</a> (void)</td></tr>
<tr class="memdesc:ga35f21cabe1637b1be964024a8f77721c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get driver capabilities.  <a href="group__can__interface__gr.html#ga35f21cabe1637b1be964024a8f77721c">More...</a><br /></td></tr>
<tr class="separator:ga35f21cabe1637b1be964024a8f77721c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa72ceb25ba67e279d7432404632deb44"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#gaa72ceb25ba67e279d7432404632deb44">ARM_CAN_Initialize</a> (<a class="el" href="group__can__interface__gr.html#gaac07b9fdf614bf439414f5417aaa376e">ARM_CAN_SignalUnitEvent_t</a> cb_unit_event, <a class="el" href="group__can__interface__gr.html#ga7ceceac3e9aa0981c5cacfab88efb4eb">ARM_CAN_SignalObjectEvent_t</a> cb_object_event)</td></tr>
<tr class="memdesc:gaa72ceb25ba67e279d7432404632deb44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize CAN interface and register signal (callback) functions.  <a href="group__can__interface__gr.html#gaa72ceb25ba67e279d7432404632deb44">More...</a><br /></td></tr>
<tr class="separator:gaa72ceb25ba67e279d7432404632deb44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e3e364b64f2ab277399e3279cce5ef8"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga1e3e364b64f2ab277399e3279cce5ef8">ARM_CAN_Uninitialize</a> (void)</td></tr>
<tr class="memdesc:ga1e3e364b64f2ab277399e3279cce5ef8"><td class="mdescLeft">&#160;</td><td class="mdescRight">De-initialize CAN interface.  <a href="group__can__interface__gr.html#ga1e3e364b64f2ab277399e3279cce5ef8">More...</a><br /></td></tr>
<tr class="separator:ga1e3e364b64f2ab277399e3279cce5ef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f634f126ac97daef2f3115aa7bfed7c"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga6f634f126ac97daef2f3115aa7bfed7c">ARM_CAN_PowerControl</a> (ARM_POWER_STATE state)</td></tr>
<tr class="memdesc:ga6f634f126ac97daef2f3115aa7bfed7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control CAN interface power.  <a href="group__can__interface__gr.html#ga6f634f126ac97daef2f3115aa7bfed7c">More...</a><br /></td></tr>
<tr class="separator:ga6f634f126ac97daef2f3115aa7bfed7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1fe6cc207415de604975ae251e269361"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga1fe6cc207415de604975ae251e269361">ARM_CAN_GetClock</a> (void)</td></tr>
<tr class="memdesc:ga1fe6cc207415de604975ae251e269361"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve CAN base clock frequency.  <a href="group__can__interface__gr.html#ga1fe6cc207415de604975ae251e269361">More...</a><br /></td></tr>
<tr class="separator:ga1fe6cc207415de604975ae251e269361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga88bb27a8525503a250cca7a2c4a5d07a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga88bb27a8525503a250cca7a2c4a5d07a">ARM_CAN_SetBitrate</a> (ARM_CAN_BITRATE_SELECT select, uint32_t bitrate, uint32_t bit_segments)</td></tr>
<tr class="memdesc:ga88bb27a8525503a250cca7a2c4a5d07a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set bitrate for CAN interface.  <a href="group__can__interface__gr.html#ga88bb27a8525503a250cca7a2c4a5d07a">More...</a><br /></td></tr>
<tr class="separator:ga88bb27a8525503a250cca7a2c4a5d07a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga28226a6e223f9b95b4dafb7c2f48a855"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga28226a6e223f9b95b4dafb7c2f48a855">ARM_CAN_SetMode</a> (ARM_CAN_MODE mode)</td></tr>
<tr class="memdesc:ga28226a6e223f9b95b4dafb7c2f48a855"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set operating mode for CAN interface.  <a href="group__can__interface__gr.html#ga28226a6e223f9b95b4dafb7c2f48a855">More...</a><br /></td></tr>
<tr class="separator:ga28226a6e223f9b95b4dafb7c2f48a855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45ab314f5121cf5a1b32d9adc600e0f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_OBJ_CAPABILITIES</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga45ab314f5121cf5a1b32d9adc600e0f7">ARM_CAN_ObjectGetCapabilities</a> (uint32_t obj_idx)</td></tr>
<tr class="memdesc:ga45ab314f5121cf5a1b32d9adc600e0f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve capabilities of an object.  <a href="group__can__interface__gr.html#ga45ab314f5121cf5a1b32d9adc600e0f7">More...</a><br /></td></tr>
<tr class="separator:ga45ab314f5121cf5a1b32d9adc600e0f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f9bc7088704483388e14872c9d5385d"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga4f9bc7088704483388e14872c9d5385d">ARM_CAN_ObjectSetFilter</a> (uint32_t obj_idx, ARM_CAN_FILTER_OPERATION operation, uint32_t id, uint32_t arg)</td></tr>
<tr class="memdesc:ga4f9bc7088704483388e14872c9d5385d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add or remove filter for message reception.  <a href="group__can__interface__gr.html#ga4f9bc7088704483388e14872c9d5385d">More...</a><br /></td></tr>
<tr class="separator:ga4f9bc7088704483388e14872c9d5385d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00ec0715f6755a49dae5b60dca182630"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga00ec0715f6755a49dae5b60dca182630">ARM_CAN_ObjectConfigure</a> (uint32_t obj_idx, ARM_CAN_OBJ_CONFIG obj_cfg)</td></tr>
<tr class="memdesc:ga00ec0715f6755a49dae5b60dca182630"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure object.  <a href="group__can__interface__gr.html#ga00ec0715f6755a49dae5b60dca182630">More...</a><br /></td></tr>
<tr class="separator:ga00ec0715f6755a49dae5b60dca182630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0dcffd362b4093043442a030eaebbcfe"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga0dcffd362b4093043442a030eaebbcfe">ARM_CAN_MessageSend</a> (uint32_t obj_idx, <a class="el" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a> *msg_info, const uint8_t *data, uint8_t size)</td></tr>
<tr class="memdesc:ga0dcffd362b4093043442a030eaebbcfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send message on CAN bus.  <a href="group__can__interface__gr.html#ga0dcffd362b4093043442a030eaebbcfe">More...</a><br /></td></tr>
<tr class="separator:ga0dcffd362b4093043442a030eaebbcfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc37084df5eab32f593c2744d35cf647"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#gafc37084df5eab32f593c2744d35cf647">ARM_CAN_MessageRead</a> (uint32_t obj_idx, <a class="el" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a> *msg_info, uint8_t *data, uint8_t size)</td></tr>
<tr class="memdesc:gafc37084df5eab32f593c2744d35cf647"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read message received on CAN bus.  <a href="group__can__interface__gr.html#gafc37084df5eab32f593c2744d35cf647">More...</a><br /></td></tr>
<tr class="separator:gafc37084df5eab32f593c2744d35cf647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d9f0c5f03a8a81ab062b5aa57e5dea4"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga8d9f0c5f03a8a81ab062b5aa57e5dea4">ARM_CAN_Control</a> (uint32_t control, uint32_t arg)</td></tr>
<tr class="memdesc:ga8d9f0c5f03a8a81ab062b5aa57e5dea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control CAN interface.  <a href="group__can__interface__gr.html#ga8d9f0c5f03a8a81ab062b5aa57e5dea4">More...</a><br /></td></tr>
<tr class="separator:ga8d9f0c5f03a8a81ab062b5aa57e5dea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga676d6b567fc4ab3d44f5d7a50ec9419c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_a_r_m___c_a_n___s_t_a_t_u_s.html">ARM_CAN_STATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga676d6b567fc4ab3d44f5d7a50ec9419c">ARM_CAN_GetStatus</a> (void)</td></tr>
<tr class="memdesc:ga676d6b567fc4ab3d44f5d7a50ec9419c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get CAN status.  <a href="group__can__interface__gr.html#ga676d6b567fc4ab3d44f5d7a50ec9419c">More...</a><br /></td></tr>
<tr class="separator:ga676d6b567fc4ab3d44f5d7a50ec9419c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38795d1ed135ce3bd87f31ef1596bccf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#ga38795d1ed135ce3bd87f31ef1596bccf">ARM_CAN_SignalUnitEvent</a> (uint32_t event)</td></tr>
<tr class="memdesc:ga38795d1ed135ce3bd87f31ef1596bccf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal CAN unit event.  <a href="group__can__interface__gr.html#ga38795d1ed135ce3bd87f31ef1596bccf">More...</a><br /></td></tr>
<tr class="separator:ga38795d1ed135ce3bd87f31ef1596bccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabfcaeac9e2ca25936ba5a29f2d594e7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a> (uint32_t obj_idx, uint32_t event)</td></tr>
<tr class="memdesc:gabfcaeac9e2ca25936ba5a29f2d594e7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal CAN object event.  <a href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">More...</a><br /></td></tr>
<tr class="separator:gabfcaeac9e2ca25936ba5a29f2d594e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Driver API for CAN Bus Peripheral (Driver_CAN.h) </p>
<p>The <b>Controller Area Network</b> Interface Bus (CAN) implements a multi-master serial bus for connecting microcontrollers and devices, also known as nodes, to communicate with each other in applications without a host computer. CAN is a message-based protocol, designed originally for automotive applications, but meanwhile used also in many other surroundings. The complexity of the node can range from a simple I/O device up to an embedded computer with a CAN interface and sophisticated software. The node may also be a gateway allowing a standard computer to communicate over a USB or Ethernet port to the devices on a CAN network. Devices are connected to the bus through a host processor, a CAN controller, and a CAN transceiver.</p>
<p>The CAN Driver API allows to implement CAN Interfaces that conform to the <br  />
 <a href="http://www.bosch-semiconductors.com/" target="_blank">CAN specifications available from BOSCH</a>:</p><ul>
<li>CAN 2.0B: CAN Specification 2.0B (released Sep. 1991) which is now superseded by ISO 11898-1.</li>
<li>CAN FD: CAN with Flexible Data Rate introduced in 2012 (released April 17th, 2012).</li>
</ul>
<p>Wikipedia offers more information about the <a href="http://en.wikipedia.org/wiki/CAN_bus" target="_blank"><b>CAN Bus</b></a>.</p>
<p>CAN 2.0B** Every CAN CMSIS-Driver supports the CAN 2.0B standard</p>
<p>CAN 2.0B supports:</p><ul>
<li>message can contain up to 8 data bytes</li>
<li>bitrates of up to 1Mbits/s</li>
<li><a class="el" href="group__can__interface__gr.html#Remote_Frame">Remote Frame</a> requests</li>
</ul>
<p><a class="anchor" id="CAN_FD"></a><b>CAN FD</b></p>
<p>Support for CAN FD depends on the hardware. <br  />
 A CMSIS-Driver that supports CAN FD has the capability <a class="el" href="struct_a_r_m___c_a_n___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_CAPABILITIES</a> data field <b>fd_mode</b> = \token{1}, which can be retrieved with the function <a class="el" href="group__can__interface__gr.html#ga35f21cabe1637b1be964024a8f77721c">ARM_CAN_GetCapabilities</a>.</p>
<p>CAN FD supports:</p><ul>
<li>message can contain up to 64 data bytes</li>
<li>faster data transfers with faster bitrate used during the data phase</li>
</ul>
<p>CAN FD does not support <a class="el" href="group__can__interface__gr.html#Remote_Frame">Remote Frame</a> requests.</p>
<p><b>Block Diagram</b></p>
<p>The CAN Driver API defines a <b>CAN</b> interface for middleware components. The CAN Driver supports multiple nodes, which are able to send and receive messages, but not simultaneously.</p>
<div class="image">
<img src="CAN_Node.png" alt=""/>
<div class="caption">
CAN Node Schematic</div></div>
<h2><a class="anchor" id="autotoc_md3"></a>
CAN API</h2>
<p>The following header files define the Application Programming Interface (API) for the CAN interface:</p><ul>
<li><b>Driver_CAN.h</b> : Driver API for CAN Bus Peripheral</li>
</ul>
<p>The driver implementation is a typical part of the Device Family Pack (DFP) that supports the peripherals of the microcontroller family.</p>
<p><b>Driver Functions</b></p>
<p>The driver functions are published in the access struct as explained in DriverFunctions</p><ul>
<li><a class="el" href="struct_a_r_m___d_r_i_v_e_r___c_a_n.html">ARM_DRIVER_CAN</a> : access struct for CAN driver functions</li>
</ul>
<p><b>Example Code</b></p>
<p>The following example code shows the usage of the CAN interface.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;cmsis_os.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;Driver_CAN.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// CAN Driver Controller selector</span></div>
<div class="line"><span class="preprocessor">#define  CAN_CONTROLLER         1       </span><span class="comment">// CAN Controller number</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define _CAN_Driver_(n)         Driver_CAN##n</span></div>
<div class="line"><span class="preprocessor">#define  CAN_Driver_(n)        _CAN_Driver_(n)</span></div>
<div class="line"><span class="keyword">extern</span>   <a class="code" href="struct_a_r_m___d_r_i_v_e_r___c_a_n.html">ARM_DRIVER_CAN</a>         CAN_Driver_(CAN_CONTROLLER);</div>
<div class="line"><span class="preprocessor">#define  ptrCAN               (&amp;CAN_Driver_(CAN_CONTROLLER))</span></div>
<div class="line"> </div>
<div class="line">uint32_t                        rx_obj_idx  = 0xFFFFFFFFU;</div>
<div class="line">uint8_t                         rx_data[8];</div>
<div class="line"><a class="code" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a>                rx_msg_info;</div>
<div class="line">uint32_t                        tx_obj_idx  = 0xFFFFFFFFU;</div>
<div class="line">uint8_t                         tx_data[8];</div>
<div class="line"><a class="code" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a>                tx_msg_info;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> Error_Handler (<span class="keywordtype">void</span>) { <span class="keywordflow">while</span> (1); }</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> CAN_SignalUnitEvent (uint32_t event) {}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> CAN_SignalObjectEvent (uint32_t obj_idx, uint32_t event) {</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (obj_idx == rx_obj_idx) {                  <span class="comment">// If receive object event</span></div>
<div class="line">    <span class="keywordflow">if</span> (event == <a class="code" href="group___c_a_n__events.html#ga2c1082561eeae3b2b8132e81fc241e47">ARM_CAN_EVENT_RECEIVE</a>) {       <span class="comment">// If message was received successfully</span></div>
<div class="line">      <span class="keywordflow">if</span> (ptrCAN-&gt;MessageRead(rx_obj_idx, &amp;rx_msg_info, rx_data, 8U) &gt; 0U) {</div>
<div class="line">                                                <span class="comment">// Read received message</span></div>
<div class="line">        <span class="comment">// process received message ...</span></div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (obj_idx == tx_obj_idx) {                  <span class="comment">// If transmit object event</span></div>
<div class="line">    <span class="keywordflow">if</span> (event == <a class="code" href="group___c_a_n__events.html#ga486f0f35ebc7e3b5931ee68b56703503">ARM_CAN_EVENT_SEND_COMPLETE</a>) { <span class="comment">// If message was sent successfully</span></div>
<div class="line">      <span class="comment">// acknowledge sent message ...</span></div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line">  <a class="code" href="struct_a_r_m___c_a_n___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_CAPABILITIES</a>     can_cap;</div>
<div class="line">  <a class="code" href="struct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_OBJ_CAPABILITIES</a> can_obj_cap;</div>
<div class="line">  int32_t                  status;</div>
<div class="line">  uint32_t                 i, num_objects;</div>
<div class="line"> </div>
<div class="line">  can_cap = ptrCAN-&gt;GetCapabilities (); <span class="comment">// Get CAN driver capabilities</span></div>
<div class="line">  num_objects = can_cap.num_objects;    <span class="comment">// Number of receive/transmit objects</span></div>
<div class="line"> </div>
<div class="line">  status = ptrCAN-&gt;Initialize    (CAN_SignalUnitEvent, CAN_SignalObjectEvent);  <span class="comment">// Initialize CAN driver</span></div>
<div class="line">  <span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a> ) { Error_Handler(); }</div>
<div class="line"> </div>
<div class="line">  status = ptrCAN-&gt;PowerControl  (ARM_POWER_FULL);                              <span class="comment">// Power-up CAN controller</span></div>
<div class="line">  <span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a> ) { Error_Handler(); }</div>
<div class="line"> </div>
<div class="line">  status = ptrCAN-&gt;SetMode       (ARM_CAN_MODE_INITIALIZATION);                 <span class="comment">// Activate initialization mode</span></div>
<div class="line">  <span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a> ) { Error_Handler(); }</div>
<div class="line"> </div>
<div class="line">  status = ptrCAN-&gt;SetBitrate    (ARM_CAN_BITRATE_NOMINAL,              <span class="comment">// Set nominal bitrate</span></div>
<div class="line">                                  100000U,                              <span class="comment">// Set bitrate to 100 kbit/s</span></div>
<div class="line">                                  <a class="code" href="group__can__timeseg__ctrls.html#ga01183319a5a899eafea9ffe7af73d5ea">ARM_CAN_BIT_PROP_SEG</a>(5U)   |          <span class="comment">// Set propagation segment to 5 time quanta</span></div>
<div class="line">                                  <a class="code" href="group__can__timeseg__ctrls.html#ga03f1921ee97a7ebf5d767b6cacf40792">ARM_CAN_BIT_PHASE_SEG1</a>(1U) |          <span class="comment">// Set phase segment 1 to 1 time quantum (sample point at 87.5% of bit time)</span></div>
<div class="line">                                  <a class="code" href="group__can__timeseg__ctrls.html#ga76de056d56803cb7a0d01978ee981e80">ARM_CAN_BIT_PHASE_SEG2</a>(1U) |          <span class="comment">// Set phase segment 2 to 1 time quantum (total bit is 8 time quanta long)</span></div>
<div class="line">                                  <a class="code" href="group__can__timeseg__ctrls.html#gab32e97fa4edf497c111dd3f0d8779269">ARM_CAN_BIT_SJW</a>(1U));                 <span class="comment">// Resynchronization jump width is same as phase segment 2</span></div>
<div class="line">  <span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a> ) { Error_Handler(); }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (i = 0U; i &lt; num_objects; i++) {                                          <span class="comment">// Find first available object for receive and transmit</span></div>
<div class="line">    can_obj_cap = ptrCAN-&gt;ObjectGetCapabilities (i);                            <span class="comment">// Get object capabilities</span></div>
<div class="line">    <span class="keywordflow">if</span>      ((rx_obj_idx == 0xFFFFFFFFU) &amp;&amp; (can_obj_cap.rx == 1U)) { rx_obj_idx = i; }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((tx_obj_idx == 0xFFFFFFFFU) &amp;&amp; (can_obj_cap.tx == 1U)) { tx_obj_idx = i; <span class="keywordflow">break</span>; }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> ((rx_obj_idx == 0xFFFFFFFFU) || (tx_obj_idx == 0xFFFFFFFFU)) { Error_Handler(); }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set filter to receive messages with extended ID 0x12345678 to receive object</span></div>
<div class="line">  status = ptrCAN-&gt;ObjectSetFilter(rx_obj_idx, ARM_CAN_FILTER_ID_EXACT_ADD, <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x12345678U), 0U);</div>
<div class="line">  <span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a> ) { Error_Handler(); }</div>
<div class="line"> </div>
<div class="line">  status = ptrCAN-&gt;ObjectConfigure(tx_obj_idx, ARM_CAN_OBJ_TX);                 <span class="comment">// Configure transmit object</span></div>
<div class="line">  <span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a> ) { Error_Handler(); }</div>
<div class="line"> </div>
<div class="line">  status = ptrCAN-&gt;ObjectConfigure(rx_obj_idx, ARM_CAN_OBJ_RX);                 <span class="comment">// Configure receive object</span></div>
<div class="line">  <span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a> ) { Error_Handler(); }</div>
<div class="line">  </div>
<div class="line">  status = ptrCAN-&gt;SetMode (ARM_CAN_MODE_NORMAL);                               <span class="comment">// Activate normal operation mode</span></div>
<div class="line">  <span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a> ) { Error_Handler(); }</div>
<div class="line">  </div>
<div class="line">  memset(&amp;tx_msg_info, 0U, <span class="keyword">sizeof</span>(<a class="code" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a>));                           <span class="comment">// Clear message info structure</span></div>
<div class="line">  tx_msg_info.id = <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x12345678U);                            <span class="comment">// Set extended ID for transmit message</span></div>
<div class="line">  tx_data[0]     = 0xFFU;                                                       <span class="comment">// Initialize transmit data</span></div>
<div class="line">  <span class="keywordflow">while</span> (1) {</div>
<div class="line">    tx_data[0]++;                                                               <span class="comment">// Increment transmit data</span></div>
<div class="line">    status = ptrCAN-&gt;MessageSend(tx_obj_idx, &amp;tx_msg_info, tx_data, 1U);        <span class="comment">// Send data message with 1 data byte</span></div>
<div class="line">    <span class="keywordflow">if</span> (status != 1U) { Error_Handler(); }</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0U; i &lt; 1000000U; i++) { __nop(); }                                <span class="comment">// Wait a little while</span></div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="agroup___c_a_n__events_html_ga2c1082561eeae3b2b8132e81fc241e47"><div class="ttname"><a href="group___c_a_n__events.html#ga2c1082561eeae3b2b8132e81fc241e47">ARM_CAN_EVENT_RECEIVE</a></div><div class="ttdeci">#define ARM_CAN_EVENT_RECEIVE</div><div class="ttdoc">Message received.</div><div class="ttdef"><b>Definition:</b> Driver_CAN.h:195</div></div>
<div class="ttc" id="agroup___c_a_n__events_html_ga486f0f35ebc7e3b5931ee68b56703503"><div class="ttname"><a href="group___c_a_n__events.html#ga486f0f35ebc7e3b5931ee68b56703503">ARM_CAN_EVENT_SEND_COMPLETE</a></div><div class="ttdeci">#define ARM_CAN_EVENT_SEND_COMPLETE</div><div class="ttdoc">Send complete.</div><div class="ttdef"><b>Definition:</b> Driver_CAN.h:194</div></div>
<div class="ttc" id="agroup__can__identifer__ctrls_html_gae7d4efb6fb49e1ec47c2b12e22f37cae"><div class="ttname"><a href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a></div><div class="ttdeci">#define ARM_CAN_EXTENDED_ID(id)</div><div class="ttdoc">CAN identifier in extended format (29-bits)</div><div class="ttdef"><b>Definition:</b> Driver_CAN.h:138</div></div>
<div class="ttc" id="agroup__can__timeseg__ctrls_html_ga01183319a5a899eafea9ffe7af73d5ea"><div class="ttname"><a href="group__can__timeseg__ctrls.html#ga01183319a5a899eafea9ffe7af73d5ea">ARM_CAN_BIT_PROP_SEG</a></div><div class="ttdeci">#define ARM_CAN_BIT_PROP_SEG(x)</div><div class="ttdef"><b>Definition:</b> Driver_CAN.h:62</div></div>
<div class="ttc" id="agroup__can__timeseg__ctrls_html_ga03f1921ee97a7ebf5d767b6cacf40792"><div class="ttname"><a href="group__can__timeseg__ctrls.html#ga03f1921ee97a7ebf5d767b6cacf40792">ARM_CAN_BIT_PHASE_SEG1</a></div><div class="ttdeci">#define ARM_CAN_BIT_PHASE_SEG1(x)</div><div class="ttdef"><b>Definition:</b> Driver_CAN.h:67</div></div>
<div class="ttc" id="agroup__can__timeseg__ctrls_html_ga76de056d56803cb7a0d01978ee981e80"><div class="ttname"><a href="group__can__timeseg__ctrls.html#ga76de056d56803cb7a0d01978ee981e80">ARM_CAN_BIT_PHASE_SEG2</a></div><div class="ttdeci">#define ARM_CAN_BIT_PHASE_SEG2(x)</div><div class="ttdef"><b>Definition:</b> Driver_CAN.h:72</div></div>
<div class="ttc" id="agroup__can__timeseg__ctrls_html_gab32e97fa4edf497c111dd3f0d8779269"><div class="ttname"><a href="group__can__timeseg__ctrls.html#gab32e97fa4edf497c111dd3f0d8779269">ARM_CAN_BIT_SJW</a></div><div class="ttdeci">#define ARM_CAN_BIT_SJW(x)</div><div class="ttdef"><b>Definition:</b> Driver_CAN.h:77</div></div>
<div class="ttc" id="agroup__execution__status_html_ga85752c5de59e8adeb001e35ff5be6be7"><div class="ttname"><a href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a></div><div class="ttdeci">#define ARM_DRIVER_OK</div><div class="ttdoc">Operation succeeded.</div><div class="ttdef"><b>Definition:</b> Driver_Common.h:52</div></div>
<div class="ttc" id="astruct_a_r_m___c_a_n___c_a_p_a_b_i_l_i_t_i_e_s_html"><div class="ttname"><a href="struct_a_r_m___c_a_n___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_CAPABILITIES</a></div></div>
<div class="ttc" id="astruct_a_r_m___c_a_n___m_s_g___i_n_f_o_html"><div class="ttname"><a href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a></div><div class="ttdoc">CAN Message Information.</div></div>
<div class="ttc" id="astruct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s_html"><div class="ttname"><a href="struct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_OBJ_CAPABILITIES</a></div></div>
<div class="ttc" id="astruct_a_r_m___d_r_i_v_e_r___c_a_n_html"><div class="ttname"><a href="struct_a_r_m___d_r_i_v_e_r___c_a_n.html">ARM_DRIVER_CAN</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="can_objects"></a>
CAN Message Objects</h1>
<p>The CMSIS-Driver for the CAN interface provides multiple CAN message objects, which can be seen as individual communication channels. The number of available CAN message objects depends on the CAN peripheral. The function <a class="el" href="group__can__interface__gr.html#ga35f21cabe1637b1be964024a8f77721c">ARM_CAN_GetCapabilities</a> returns the maximum number of available CAN message objects. The number is encoded in the structure <a class="el" href="struct_a_r_m___c_a_n___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_CAPABILITIES</a> in the data field <em>num_objects</em>. CAN message objects are addressed with the functions listed below, whereby the parameter <em>obj_idx</em> addresses an individual object. The valid range for <em>obj_idx</em> is \token{[0 .. (<em>num_objects</em> - 1)]}.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Function   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__interface__gr.html#ga45ab314f5121cf5a1b32d9adc600e0f7">ARM_CAN_ObjectGetCapabilities</a>   </td><td class="markdownTableBodyLeft">Retrieves message object capabilities such as receive, transmit, <a class="el" href="group__can__interface__gr.html#Remote_Frame">Remote Frame</a> automatic handling and <a class="el" href="group__can__interface__gr.html#can_filtering">CAN Message Filtering</a>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__interface__gr.html#ga4f9bc7088704483388e14872c9d5385d">ARM_CAN_ObjectSetFilter</a>   </td><td class="markdownTableBodyLeft">Allows to set-up CAN ID filtering for the message object.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__interface__gr.html#ga00ec0715f6755a49dae5b60dca182630">ARM_CAN_ObjectConfigure</a>   </td><td class="markdownTableBodyLeft">Allows to configure the message object for receive, transmit or <a class="el" href="group__can__interface__gr.html#Remote_Frame">Remote Frame</a> automatic handling.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__interface__gr.html#gafc37084df5eab32f593c2744d35cf647">ARM_CAN_MessageRead</a>   </td><td class="markdownTableBodyLeft">Read received message from the message object.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__interface__gr.html#ga0dcffd362b4093043442a030eaebbcfe">ARM_CAN_MessageSend</a>   </td><td class="markdownTableBodyLeft">Send CAN message or send <a class="el" href="group__can__interface__gr.html#Remote_Frame">Remote Frame</a> or set CAN message to be sent automatically on reception of matching <a class="el" href="group__can__interface__gr.html#Remote_Frame">Remote Frame</a> on the message object.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a>   </td><td class="markdownTableBodyLeft">Callback function that signals a message transfer or a received message overrun.   </td></tr>
</table>
<p>Each CAN message object may have different capabilities. Before using a CAN message object, call the function <a class="el" href="group__can__interface__gr.html#ga45ab314f5121cf5a1b32d9adc600e0f7">ARM_CAN_ObjectGetCapabilities</a> to verify the available features.</p>
<h1><a class="anchor" id="can_filtering"></a>
CAN Message Filtering</h1>
<p>The CMSIS-Driver for the CAN interface supports ID filtering for the receiving message objects. The receiving CAN node examines the identifier to decide if it was relevant. This filtering is done by the CAN peripheral according the settings configured with the function <a class="el" href="group__can__interface__gr.html#ga4f9bc7088704483388e14872c9d5385d">ARM_CAN_ObjectSetFilter</a>.</p>
<p>The function <a class="el" href="group__can__interface__gr.html#ga45ab314f5121cf5a1b32d9adc600e0f7">ARM_CAN_ObjectGetCapabilities</a> retrieves the filter capabilities of the CAN message objects stored in <a class="el" href="struct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_OBJ_CAPABILITIES</a>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Data Fields   </th><th class="markdownTableHeadLeft">CAN Messages Object can be filtered with ...    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><em>exact_filtering</em>   </td><td class="markdownTableBodyLeft">an exact ID value set by using the function <a class="el" href="group__can__interface__gr.html#ga4f9bc7088704483388e14872c9d5385d">ARM_CAN_ObjectSetFilter</a> with <em>control</em> = ARM_CAN_FILTER_ID_EXACT_ADD.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><em>range_filtering</em>   </td><td class="markdownTableBodyLeft">a range ID value set by using the function <a class="el" href="group__can__interface__gr.html#ga4f9bc7088704483388e14872c9d5385d">ARM_CAN_ObjectSetFilter</a> with <em>control</em> = ARM_CAN_FILTER_ID_RANGE_ADD.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><em>mask_filtering</em>   </td><td class="markdownTableBodyLeft">a mask ID value set by as using the function <a class="el" href="group__can__interface__gr.html#ga4f9bc7088704483388e14872c9d5385d">ARM_CAN_ObjectSetFilter</a> with <em>control</em> = ARM_CAN_FILTER_ID_MASKABLE_ADD.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><em>multiple_filters</em>   </td><td class="markdownTableBodyLeft">... several filters to capture multiple ID values, or ID value ranges.   </td></tr>
</table>
<p><b>CAN message filtering using an exact ID</b></p>
<p>Example: accept in message object #1 only frames with extended ID = 0x1567. </p><div class="fragment"><div class="line">status = ptrCAN-&gt;ObjectSetFilter (1, ARM_CAN_FILTER_ID_EXACT_ADD, <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x1567), 0);</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>) ... <span class="comment">// error handling</span></div>
</div><!-- fragment --><p>Example: accept in message object #2 frames with extended ID = 0x3167 and extended ID = 0x42123. </p><div class="fragment"><div class="line">status = ptrCAN-&gt;ObjectSetFilter (2, ARM_CAN_FILTER_ID_EXACT_ADD, <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x3167), 0);</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>) ... <span class="comment">// error handling</span></div>
<div class="line">status = ptrCAN-&gt;ObjectSetFilter (2, ARM_CAN_FILTER_ID_EXACT_ADD, <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x42123), 0);</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>) ... <span class="comment">// error handling</span></div>
</div><!-- fragment --><p><b>CAN message filtering using a range ID</b></p>
<p>Example: accept in message object #3 only frames with extended ID &gt;= 0x1567 and extended ID &lt;= 0x1577. </p><div class="fragment"><div class="line">status = ptrCAN-&gt;ObjectSetFilter (3, ARM_CAN_FILTER_ID_RANGE_ADD, <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x1567), <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x1577));</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>) ... <span class="comment">// error handling</span></div>
</div><!-- fragment --><p><b>CAN message filtering using a mask ID</b></p>
<p>Using the function <a class="el" href="group__can__interface__gr.html#ga4f9bc7088704483388e14872c9d5385d">ARM_CAN_ObjectSetFilter</a> with <em>control</em> = ARM_CAN_FILTER_ID_MASKABLE_ADD allows to specify with <em>arg</em> a mask value.</p><ul>
<li>if a mask bit is \token{0}, the corresponding <em>ID</em> bit will be accepted, regardless of the value.</li>
<li>if a mask bit is \token{1}, the corresponding <em>ID</em> bit will be compared with the value of the ID filter bit; if they match the message will be accepted otherwise the frame is rejected.</li>
</ul>
<p>Example: accept in message object #0 only frames with extended IDs 0x1560 to 0x156F. </p><div class="fragment"><div class="line">status = ptrCAN-&gt;ObjectSetFilter (0, ARM_CAN_FILTER_ID_MASKABLE_ADD, <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x1560), 0x1FFFFFF0);</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>) ... <span class="comment">// error handling</span></div>
</div><!-- fragment --><p>Example: accept in message object #2 only frames with extended IDs 0x35603, 0x35613, 0x35623, and 0x35633. </p><div class="fragment"><div class="line">status = ptrCAN-&gt;ObjectSetFilter (2, ARM_CAN_FILTER_ID_MASKABLE_ADD, <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x35603), 0x1FFFFFCF);</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>) ... <span class="comment">// error handling</span></div>
</div><!-- fragment --><p>Example: accept any message in object #4 regardless of the ID. </p><div class="fragment"><div class="line">status = ptrCAN-&gt;ObjectSetFilter (4, ARM_CAN_FILTER_ID_MASKABLE_ADD, <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0), 0);</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>) ... <span class="comment">// error handling</span></div>
</div><!-- fragment --><h1><a class="anchor" id="Remote_Frame"></a>
Remote Frame</h1>
<p>In general, data transmission is performed on an autonomous basis with the data source node sending out Data Frames.</p>
<p>However, sending a <b>Remote Frame</b> allows a destination node to request the data from the source node. The examples below shows the data exchange using a <b>Remote Transmission Request (RTR)</b>.</p>
<p><b>Example for automatic Data Message response on RTR</b></p>
<p>For automatic data message response on an RTR, the object is configured with the function <a class="el" href="group__can__interface__gr.html#ga00ec0715f6755a49dae5b60dca182630">ARM_CAN_ObjectConfigure</a> <em>obj_cfg</em> = ARM_CAN_OBJ_RX_RTR_TX_DATA.</p>
<p>In this case, the function <a class="el" href="group__can__interface__gr.html#ga0dcffd362b4093043442a030eaebbcfe">ARM_CAN_MessageSend</a> sets a data message that is transmitted when an RTR with a matching CAN ID is received. If <a class="el" href="group__can__interface__gr.html#ga0dcffd362b4093043442a030eaebbcfe">ARM_CAN_MessageSend</a> was not called before the RTR is received, the response is hardware dependent (either last data message is repeated or no data message is sent until <a class="el" href="group__can__interface__gr.html#ga0dcffd362b4093043442a030eaebbcfe">ARM_CAN_MessageSend</a> is called).</p>
<p>After data transmission is completed, the driver calls a callback function <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a> with <em>event</em> = <a class="el" href="group___c_a_n__events.html#ga486f0f35ebc7e3b5931ee68b56703503">ARM_CAN_EVENT_SEND_COMPLETE</a> and the related <em>obj_idx</em>.</p>
<p><b>Example:</b> </p><div class="fragment"><div class="line">status = ptrCAN-&gt;ObjectSetFilter(0, ARM_CAN_FILTER_ID_EXACT_ADD, <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x12345678U), 0U);</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>) ... <span class="comment">// error handling</span></div>
<div class="line">status = trCAN-&gt;ObjectConfigure(0, ARM_CAN_OBJ_RX_RTR_TX_DATA);</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>) ... <span class="comment">// error handling</span></div>
<div class="line"> </div>
<div class="line">memset(&amp;tx_msg_info, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a>));            <span class="comment">// Clear transmit message structure</span></div>
<div class="line">tx_msg_info.id  = <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x12345678U);           <span class="comment">// Set ID of message</span></div>
<div class="line">data_buf[0] = <span class="charliteral">&#39;1&#39;</span>;  data_buf[1] = <span class="charliteral">&#39;2&#39;</span>;                        <span class="comment">// Prepare data to transmit</span></div>
<div class="line">data_buf[2] = <span class="charliteral">&#39;3&#39;</span>;  data_buf[3] = <span class="charliteral">&#39;4&#39;</span>;</div>
<div class="line">data_buf[4] = <span class="charliteral">&#39;5&#39;</span>;  data_buf[5] = <span class="charliteral">&#39;6&#39;</span>;</div>
<div class="line">data_buf[6] = <span class="charliteral">&#39;7&#39;</span>;  data_buf[7] = <span class="charliteral">&#39;8&#39;</span>;</div>
<div class="line">ptrCAN-&gt;MessageSend(0, &amp;tx_msg_info, data_buf, 8);            <span class="comment">// Start send message that will be triggered on RTR reception</span></div>
</div><!-- fragment --><p><b>Example for automatic Data Message reception using RTR</b></p>
<p>For automatic data message reception on an RTR, the object is configured with the function <a class="el" href="group__can__interface__gr.html#ga00ec0715f6755a49dae5b60dca182630">ARM_CAN_ObjectConfigure</a> <em>obj_cfg</em> = ARM_CAN_OBJ_TX_RTR_RX_DATA.</p>
<p>The receiver or consumer requests data with transmission of an RTR with the <a class="el" href="group__can__interface__gr.html#ga0dcffd362b4093043442a030eaebbcfe">ARM_CAN_MessageSend</a>. This RTR requests from the transmitter or producer to send the data message. Once the data message is received, the driver calls a callback function <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a> with <em>event</em> = <a class="el" href="group___c_a_n__events.html#ga2c1082561eeae3b2b8132e81fc241e47">ARM_CAN_EVENT_RECEIVE</a> and the related <em>obj_idx</em>. The received data message can then be read with the function <a class="el" href="group__can__interface__gr.html#gafc37084df5eab32f593c2744d35cf647">ARM_CAN_MessageRead</a>.</p>
<p><b>Example:</b> </p><div class="fragment"><div class="line">status = ptrCAN-&gt;ObjectSetFilter(0, ARM_CAN_FILTER_ID_EXACT_ADD, <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x12345678U), 0U);</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>) ... <span class="comment">// error handling</span></div>
<div class="line">status = ptrCAN-&gt;ObjectConfigure(0, ARM_CAN_OBJ_TX_RTR_RX_DATA);</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>) ... <span class="comment">// error handling</span></div>
<div class="line">memset(&amp;tx_msg_info, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a>));            <span class="comment">// Clear transmit message structure</span></div>
<div class="line">tx_msg_info.id  = <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x12345678U);           <span class="comment">// Set ID of message</span></div>
<div class="line">tx_msg_info.rtr = 1;                                          <span class="comment">// Set RTR flag of message to send RTR</span></div>
<div class="line">tx_msg_info.dlc = 1;                                          <span class="comment">// Set data length code of message to 1 to request 1 data byte</span></div>
<div class="line">ptrCAN-&gt;MesageSend(0, &amp;tx_msg_info, 0, 0);                    <span class="comment">// Send RTR</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Wait for ARM_CAN_EVENT_RECEIVE</span></div>
<div class="line">ptrCAN-&gt;MessageRead(0, &amp;rx_msg_info, data_buf, 8);            <span class="comment">// Read received message</span></div>
</div><!-- fragment --> <h2 class="groupheader">Typedef Documentation</h2>
<a id="ga7ceceac3e9aa0981c5cacfab88efb4eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ceceac3e9aa0981c5cacfab88efb4eb">&#9670;&nbsp;</a></span>ARM_CAN_SignalObjectEvent_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ARM_CAN_SignalObjectEvent_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a> : Signal CAN Object Event. </p>
<p>Provides the typedef for the callback function <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a>.</p>
<p><b>Parameter for:</b></p><ul>
<li><a class="el" href="group__can__interface__gr.html#gaa72ceb25ba67e279d7432404632deb44">ARM_CAN_Initialize</a> </li>
</ul>

</div>
</div>
<a id="gaac07b9fdf614bf439414f5417aaa376e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac07b9fdf614bf439414f5417aaa376e">&#9670;&nbsp;</a></span>ARM_CAN_SignalUnitEvent_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ARM_CAN_SignalUnitEvent_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to <a class="el" href="group__can__interface__gr.html#ga38795d1ed135ce3bd87f31ef1596bccf">ARM_CAN_SignalUnitEvent</a> : Signal CAN Unit Event. </p>
<p>Provides the typedef for the callback function <a class="el" href="group__can__interface__gr.html#ga38795d1ed135ce3bd87f31ef1596bccf">ARM_CAN_SignalUnitEvent</a>.</p>
<p><b>Parameter for:</b></p><ul>
<li><a class="el" href="group__can__interface__gr.html#gaa72ceb25ba67e279d7432404632deb44">ARM_CAN_Initialize</a> </li>
</ul>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8d9f0c5f03a8a81ab062b5aa57e5dea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d9f0c5f03a8a81ab062b5aa57e5dea4">&#9670;&nbsp;</a></span>ARM_CAN_Control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_CAN_Control </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control CAN interface. </p>
<p>The function <b>ARM_CAN_Control</b> controls the CAN interface settings and executes various operations.</p>
<p>The parameter <em>control</em> specifies various operations that are listed in the table below.</p>
<p>The parameters <em>arg</em> provides, depending on the <em>control</em> value, additional information or set values.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>control</em>   </th><th class="markdownTableHeadLeft">Operation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__mode__ctrls.html#ga978ab3e8860f644dea780e87b3478ff4">ARM_CAN_SET_FD_MODE</a>   </td><td class="markdownTableBodyLeft">Select <a href="#CAN_FD"><b>CAN FD</b></a> mode; <em>arg</em> : \token{0} = CAN 2.0B; \token{1} = CAN FD.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__mode__ctrls.html#gae051a548bf785104a934908360529438">ARM_CAN_ABORT_MESSAGE_SEND</a>   </td><td class="markdownTableBodyLeft">Abort sending of CAN message; <em>arg</em> : object index    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__mode__ctrls.html#ga0453b8900ca3a0d5210ffd6a918a78e6">ARM_CAN_CONTROL_RETRANSMISSION</a>   </td><td class="markdownTableBodyLeft">Enable/disable automatic retransmission; <em>arg</em> : \token{0 = disable, 1 = enable (default state)}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__mode__ctrls.html#ga398dd25256e644cd8d6506495a06bde8">ARM_CAN_SET_TRANSCEIVER_DELAY</a>   </td><td class="markdownTableBodyLeft">Set transceiver delay; <em>arg</em> : delay in time quanta   </td></tr>
</table>
<p>Verify the CAN interface capabilities with <a class="el" href="group__can__interface__gr.html#ga35f21cabe1637b1be964024a8f77721c">ARM_CAN_GetCapabilities</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">control</td><td>Operation<ul>
<li><a class="el" href="group__can__mode__ctrls.html#ga978ab3e8860f644dea780e87b3478ff4">ARM_CAN_SET_FD_MODE</a> : set FD operation mode</li>
<li><a class="el" href="group__can__mode__ctrls.html#gae051a548bf785104a934908360529438">ARM_CAN_ABORT_MESSAGE_SEND</a> : abort sending of CAN message</li>
<li><a class="el" href="group__can__mode__ctrls.html#ga0453b8900ca3a0d5210ffd6a918a78e6">ARM_CAN_CONTROL_RETRANSMISSION</a> : enable/disable automatic retransmission</li>
<li><a class="el" href="group__can__mode__ctrls.html#ga398dd25256e644cd8d6506495a06bde8">ARM_CAN_SET_TRANSCEIVER_DELAY</a> : set transceiver delay </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Argument of operation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="ga35f21cabe1637b1be964024a8f77721c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga35f21cabe1637b1be964024a8f77721c">&#9670;&nbsp;</a></span>ARM_CAN_GetCapabilities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_a_r_m___c_a_n___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_CAPABILITIES</a> ARM_CAN_GetCapabilities </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get driver capabilities. </p>
<p>The function <b>ARM_CAN_GetCapabilities</b> returns information about the capabilities in this driver implementation. The data fields of the structure <a class="el" href="struct_a_r_m___c_a_n___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_CAPABILITIES</a> encode various capabilities.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="keyword">extern</span> <a class="code" href="struct_a_r_m___d_r_i_v_e_r___c_a_n.html">ARM_DRIVER_CAN</a> Driver_CAN0;</div>
<div class="line"><a class="code" href="struct_a_r_m___d_r_i_v_e_r___c_a_n.html">ARM_DRIVER_CAN</a> *drv_info;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> read_capabilities (<span class="keywordtype">void</span>)  {</div>
<div class="line">  <a class="code" href="struct_a_r_m___c_a_n___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_CAPABILITIES</a> drv_capabilities;</div>
<div class="line"> </div>
<div class="line">  drv_info = &amp;Driver_CAN0;</div>
<div class="line">  drv_capabilities = drv_info-&gt;GetCapabilities ();</div>
<div class="line">  <span class="comment">// interrogate capabilities</span></div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_a_r_m___c_a_n___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_CAPABILITIES</a> </dd></dl>

</div>
</div>
<a id="ga1fe6cc207415de604975ae251e269361"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1fe6cc207415de604975ae251e269361">&#9670;&nbsp;</a></span>ARM_CAN_GetClock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ARM_CAN_GetClock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve CAN base clock frequency. </p>
<p>The function <b>ARM_CAN_GetClock</b> returns the CAN base clock frequency in \token{[Hz]}. This value may be used to validate the <em>bitrate</em> for the function <a class="el" href="group__can__interface__gr.html#ga88bb27a8525503a250cca7a2c4a5d07a">ARM_CAN_SetBitrate</a>.</p>
<p><b>Example</b>: </p><div class="fragment"><div class="line">CAN_clock = <a class="code" href="group__can__interface__gr.html#ga1fe6cc207415de604975ae251e269361">ARM_CAN_GetClock</a>();  <span class="comment">// CAN base clock frequency</span></div>
<div class="ttc" id="agroup__can__interface__gr_html_ga1fe6cc207415de604975ae251e269361"><div class="ttname"><a href="group__can__interface__gr.html#ga1fe6cc207415de604975ae251e269361">ARM_CAN_GetClock</a></div><div class="ttdeci">uint32_t ARM_CAN_GetClock(void)</div><div class="ttdoc">Retrieve CAN base clock frequency.</div><div class="ttdef"><b>Definition:</b> Driver_CAN.c:702</div></div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>base clock frequency </dd></dl>

</div>
</div>
<a id="ga676d6b567fc4ab3d44f5d7a50ec9419c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga676d6b567fc4ab3d44f5d7a50ec9419c">&#9670;&nbsp;</a></span>ARM_CAN_GetStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_a_r_m___c_a_n___s_t_a_t_u_s.html">ARM_CAN_STATUS</a> ARM_CAN_GetStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get CAN status. </p>
<p>The function <b>ARM_CAN_GetStatus</b> retrieves runtime information on CAN bus and CAN unit state.</p>
<p>The following defines give information about the current unit involvement in bus communication:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Unit State   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__status__code__ctrls.html#ga911a65cc31304d57d283a21476d9ade7">ARM_CAN_UNIT_STATE_INACTIVE</a>   </td><td class="markdownTableBodyLeft">Unit state: Not active on the bus. Unit is in initialization state.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__status__code__ctrls.html#ga5f72c295ee2b829a8ae33b96466cc0e8">ARM_CAN_UNIT_STATE_ACTIVE</a>   </td><td class="markdownTableBodyLeft">Unit state: Active on the bus. Unit can generate active error frames.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__status__code__ctrls.html#gace2db0f930f935054c21242f735e1922">ARM_CAN_UNIT_STATE_PASSIVE</a>   </td><td class="markdownTableBodyLeft">Unit state: Error passive. Unit is interacting on the bus but does not send active error frames.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__status__code__ctrls.html#gadd78b515410235cd77d0a10213ff4192">ARM_CAN_UNIT_STATE_BUS_OFF</a>   </td><td class="markdownTableBodyLeft">Unit state: Bus-off. Unit does not participate on the bus but monitors it and can recover to active state.   </td></tr>
</table>
<p>The following defines are error codes of the last error that happened on the bus:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Last Error Code   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__status__code__ctrls.html#ga5332a311f44caec256d59087c705e1e9">ARM_CAN_LEC_NO_ERROR</a>   </td><td class="markdownTableBodyLeft">No error. There was no error since last read of status or last successful transmit or receive.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__status__code__ctrls.html#ga0571c3c3e341ac0579aa713fdfdae77e">ARM_CAN_LEC_BIT_ERROR</a>   </td><td class="markdownTableBodyLeft">Bit error. The bit monitored is different than the bit sent (except during arbitration phase).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__status__code__ctrls.html#ga33cbda311f4c2f2464e4070dee78b2f2">ARM_CAN_LEC_STUFF_ERROR</a>   </td><td class="markdownTableBodyLeft">Bit stuffing error. There were 6 consecutive same bit levels on the bus.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__status__code__ctrls.html#ga1380f80b709ca921634aecdaf34a24e5">ARM_CAN_LEC_CRC_ERROR</a>   </td><td class="markdownTableBodyLeft">CRC error. CRC of received data is not as expected.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__status__code__ctrls.html#ga9f753ba50045b28653fb3215ec2e4b8a">ARM_CAN_LEC_FORM_ERROR</a>   </td><td class="markdownTableBodyLeft">Illegal fixed-form bit. Error in fixed form bits.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__can__status__code__ctrls.html#gaae6e827242137bc4d8976cd4ba73015f">ARM_CAN_LEC_ACK_ERROR</a>   </td><td class="markdownTableBodyLeft">Acknowledgment error. Message was not acknowledged by any receiver on the bus.   </td></tr>
</table>
<dl class="section return"><dt>Returns</dt><dd>CAN status <a class="el" href="struct_a_r_m___c_a_n___s_t_a_t_u_s.html">ARM_CAN_STATUS</a> </dd></dl>

</div>
</div>
<a id="ga4256d5b23ffcb27759a05f8e6b854f13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4256d5b23ffcb27759a05f8e6b854f13">&#9670;&nbsp;</a></span>ARM_CAN_GetVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a> ARM_CAN_GetVersion </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get driver version. </p>
<p>The function <b>ARM_CAN_GetVersion</b> returns version information of the driver implementation in <a class="el" href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a></p><ul>
<li>API version is the version of the CMSIS-Driver specification used to implement this driver.</li>
<li>Driver version is source code version of the actual driver implementation.</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line"><span class="keyword">extern</span> <a class="code" href="struct_a_r_m___d_r_i_v_e_r___c_a_n.html">ARM_DRIVER_CAN</a> Driver_CAN0;</div>
<div class="line"><a class="code" href="struct_a_r_m___d_r_i_v_e_r___c_a_n.html">ARM_DRIVER_CAN</a> *drv_info;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup_can (<span class="keywordtype">void</span>)  {</div>
<div class="line">  <a class="code" href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a>  version;</div>
<div class="line"> </div>
<div class="line">  drv_info = &amp;Driver_CAN0;</div>
<div class="line">  version = drv_info-&gt;GetVersion ();</div>
<div class="line">  <span class="keywordflow">if</span> (version.api &lt; 0x10A)   {      <span class="comment">// requires at minimum API version 1.10 or higher</span></div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="astruct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n_html"><div class="ttname"><a href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a></div></div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a> </dd></dl>

</div>
</div>
<a id="gaa72ceb25ba67e279d7432404632deb44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa72ceb25ba67e279d7432404632deb44">&#9670;&nbsp;</a></span>ARM_CAN_Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_CAN_Initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__can__interface__gr.html#gaac07b9fdf614bf439414f5417aaa376e">ARM_CAN_SignalUnitEvent_t</a>&#160;</td>
          <td class="paramname"><em>cb_unit_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__can__interface__gr.html#ga7ceceac3e9aa0981c5cacfab88efb4eb">ARM_CAN_SignalObjectEvent_t</a>&#160;</td>
          <td class="paramname"><em>cb_object_event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize CAN interface and register signal (callback) functions. </p>
<p>The function <b>initializes</b> the CAN interface.</p>
<p>The function performs the following operations:</p><ul>
<li>Initializes the resources needed for the CAN interface, for example dynamic memory allocation, RTOS object allocation, and possibly hardware pin configuration.</li>
<li>Registers the <a class="el" href="group__can__interface__gr.html#ga38795d1ed135ce3bd87f31ef1596bccf">ARM_CAN_SignalUnitEvent</a> callback function.</li>
<li>Registers the <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a> callback function.</li>
</ul>
<p>The parameter <em>cb_unit_event</em> is a pointer to the <a class="el" href="group__can__interface__gr.html#ga38795d1ed135ce3bd87f31ef1596bccf">ARM_CAN_SignalUnitEvent</a> callback function; use a NULL pointer when no callback signals are required.</p>
<p>The parameter <em>cb_object_event</em> is a pointer to the <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a> callback function; use a NULL pointer when no callback signals are required.</p>
<p><b>Example:</b> </p><ul>
<li>see <a class="el" href="group__can__interface__gr.html">CAN Interface</a></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb_unit_event</td><td>Pointer to <a class="el" href="group__can__interface__gr.html#ga38795d1ed135ce3bd87f31ef1596bccf">ARM_CAN_SignalUnitEvent</a> callback function </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb_object_event</td><td>Pointer to <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a> callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="gafc37084df5eab32f593c2744d35cf647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafc37084df5eab32f593c2744d35cf647">&#9670;&nbsp;</a></span>ARM_CAN_MessageRead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_CAN_MessageRead </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>obj_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a> *&#160;</td>
          <td class="paramname"><em>msg_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read message received on CAN bus. </p>
<p>The function <b>ARM_CAN_MessageRead</b> reads the message received on the CAN bus, if <em>obj_idx</em> was configured for reception or for automatic Data Message reception using RTR and the callback function <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a> was called signalling <a class="el" href="group___c_a_n__events.html#ga2c1082561eeae3b2b8132e81fc241e47">ARM_CAN_EVENT_RECEIVE</a>. If the message was overrun by another received message, then the callback function <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a> will be called signalling <a class="el" href="group___c_a_n__events.html#ga6c2d29b5c49d5cd18e97f5931157a94c">ARM_CAN_EVENT_RECEIVE_OVERRUN</a>.</p>
<p>The function can read a maximum of \token{8} data bytes for CAN and \token{64} bytes for CAN FD.</p>
<p>The parameter <em>obj_idx</em> specifies the message object index. <br  />
The parameter <em>msg_info</em> is a pointer to the CAN information structure. <br  />
The parameter <em>data</em> is a pointer to the data buffer for reading data. <br  />
The parameter <em>size</em> is data buffer size in bytes and indicates the maximum number of bytes that can be read.</p>
<p>The function returns the number of read data in bytes or the <a class="el" href="group__execution__status.html">Status Error Codes</a>.</p>
<p>All data fields of the structure <a class="el" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a> are updated as described below:</p><ul>
<li>id: Identifier of the message that was received, bit \token{31} specifies if it is a \token{11-bit} identifier or \token{29-bit} identifier.</li>
<li>rtr: \token{1} = Remote Frame Request was received (<em>dlc</em> is number of requested bytes). \token{0} = data message</li>
<li>edl: \token{1} = CAN FD Extended Data Length message was received. \token{0} = not Extended Data Length message.</li>
<li>brs: \token{1} = CAN FD Bit Rate Switching was used for message transfer. \token{0} = no Bit Rate Switching was used.</li>
<li>esi: \token{1} = CAN FD Error State Indicator is active for received message. \token{0} = Error State Indicator is not active.</li>
<li>dlc: Data Length Code is the number of data bytes in the received message or number of data bytes requested by RTR.</li>
</ul>
<p>Message reception can be disabled by de-configuring the receive object with the function <a class="el" href="group__can__interface__gr.html#ga00ec0715f6755a49dae5b60dca182630">ARM_CAN_ObjectConfigure</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj_idx</td><td>Object index </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msg_info</td><td>Pointer to read CAN message information </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer to data buffer for read data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Maximum number of data bytes to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value &gt;= 0 number of data bytes read </dd>
<dd>
value &lt; 0 <a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="ga0dcffd362b4093043442a030eaebbcfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0dcffd362b4093043442a030eaebbcfe">&#9670;&nbsp;</a></span>ARM_CAN_MessageSend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_CAN_MessageSend </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>obj_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a> *&#160;</td>
          <td class="paramname"><em>msg_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send message on CAN bus. </p>
<p>The function <b>ARM_CAN_MessageSend</b> sends a CAN message on the CAN bus, or sets data message that will be automatically returned upon RTR reception with matching CAN ID.</p>
<p>Only one message can be sent with a call to this function (for CAN up to \token{8} bytes; for CAN FD up to \token{64} bytes of data). A message transmission can be terminated with a call to the function <a class="el" href="group__can__interface__gr.html#ga8d9f0c5f03a8a81ab062b5aa57e5dea4">ARM_CAN_Control</a> with <em>control</em> = <a class="el" href="group__can__mode__ctrls.html#gae051a548bf785104a934908360529438">ARM_CAN_ABORT_MESSAGE_SEND</a>.</p>
<p>The parameter <em>obj_idx</em> specifies the message object index.</p>
<p>The parameter <em>msg_info</em> is a pointer to the structure <a class="el" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a>, which contains the following relevant data fields for sending message:</p><ul>
<li><em>id:</em> Identifier of the message; bit \token{31} specifies if this is an \token{11-bit} or \token{29-bit} identifier.</li>
<li><em>rtr:</em> Specifies if Remote Transmission Request should be sent (<em>dlc</em> is used for number of requested bytes), otherwise the data message will be sent. Refer to <a class="el" href="group__can__interface__gr.html#Remote_Frame">Remote Frame</a> for details.</li>
<li><em>edl:</em> Specifies if Extended Data Length is used; for CAN FD, message can contain up to \token{64} data bytes.</li>
<li><em>brs:</em> Specifies if Bit Rate Switching is to be used; for CAN FD, the bit rate can be increased during data phase.</li>
<li><em>dlc:</em> Data Length Code of requested data bytes when sending Remote Transmission Request.</li>
</ul>
<p>The parameter <em>data</em> is a pointer to the data buffer.<br  />
The parameter <em>size</em> is the number of data bytes to send.<br  />
 The function returns the number of bytes accepted to be sent or <a class="el" href="group__execution__status.html#ga13c1123319c7b9a4735d63447f35116b">ARM_DRIVER_ERROR_BUSY</a> if the hardware is not ready to accept a new message for transmission.</p>
<p>When the message is sent, the callback function <a class="el" href="group__can__interface__gr.html#gabfcaeac9e2ca25936ba5a29f2d594e7e">ARM_CAN_SignalObjectEvent</a> is called signalling <a class="el" href="group___c_a_n__events.html#ga486f0f35ebc7e3b5931ee68b56703503">ARM_CAN_EVENT_SEND_COMPLETE</a> on specified object.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__can__interface__gr.html#can_filtering">CAN Message Filtering</a></dd></dl>
<p><b>Example:</b></p>
<div class="fragment"><div class="line">status = ptrCAN-&gt;ObjectConfigure(0, ARM_CAN_OBJ_TX);</div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a> ) { Error_Handler(); }</div>
<div class="line"> </div>
<div class="line">memset(&amp;tx_msg_info, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_a_r_m___c_a_n___m_s_g___i_n_f_o.html">ARM_CAN_MSG_INFO</a>));            <span class="comment">// Clear transmit message structure</span></div>
<div class="line">tx_msg_info.id  = <a class="code" href="group__can__identifer__ctrls.html#gae7d4efb6fb49e1ec47c2b12e22f37cae">ARM_CAN_EXTENDED_ID</a>(0x12345678U);           <span class="comment">// Set ID of message</span></div>
<div class="line">data_buf[0] = <span class="charliteral">&#39;1&#39;</span>;  data_buf[1] = <span class="charliteral">&#39;2&#39;</span>;                        <span class="comment">// Prepare data to transmit</span></div>
<div class="line">data_buf[2] = <span class="charliteral">&#39;3&#39;</span>;  data_buf[3] = <span class="charliteral">&#39;4&#39;</span>;</div>
<div class="line">data_buf[4] = <span class="charliteral">&#39;5&#39;</span>;  data_buf[5] = <span class="charliteral">&#39;6&#39;</span>;</div>
<div class="line">data_buf[6] = <span class="charliteral">&#39;7&#39;</span>;  data_buf[7] = <span class="charliteral">&#39;8&#39;</span>;</div>
<div class="line">status = ptrCAN-&gt;MesageSend(0, &amp;tx_msg_info, data_buf, 8);    <span class="comment">// Send message</span></div>
<div class="line"><span class="keywordflow">if</span> (status != <a class="code" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a> ) { Error_Handler(); }</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj_idx</td><td>Object index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg_info</td><td>Pointer to CAN message information </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to data buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Number of data bytes to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value &gt;= 0 number of data bytes accepted to send </dd>
<dd>
value &lt; 0 <a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="ga00ec0715f6755a49dae5b60dca182630"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga00ec0715f6755a49dae5b60dca182630">&#9670;&nbsp;</a></span>ARM_CAN_ObjectConfigure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_CAN_ObjectConfigure </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>obj_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ARM_CAN_OBJ_CONFIG&#160;</td>
          <td class="paramname"><em>obj_cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure object. </p>
<p>The function <b>ARM_CAN_ObjectConfigure</b> configures the message object, which can be a mailbox or FIFO. Refer to <a class="el" href="group__can__interface__gr.html#can_filtering">CAN Message Filtering</a> for details.</p>
<p>The parameter <em>obj_idx</em> specifies the message object index. <br  />
The parameter <em>obj_cfg</em> configures the <b>object</b> with values as shown in the following table.</p>
<table class="cmtable">
<tr>
<th>Parameter <em>obj_cfg</em>  </th><th>Object Configuration </th><th>supported when <a class="el" href="struct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_OBJ_CAPABILITIES</a> data field  </th></tr>
<tr>
<td>ARM_CAN_OBJ_INACTIVE </td><td>Deactivate object (default after <a class="el" href="group__can__interface__gr.html#gaa72ceb25ba67e279d7432404632deb44">ARM_CAN_Initialize</a>)  </td><td><em>always supported</em>  </td></tr>
<tr>
<td>ARM_CAN_OBJ_RX </td><td>Receive object; read received message with <a class="el" href="group__can__interface__gr.html#gafc37084df5eab32f593c2744d35cf647">ARM_CAN_MessageRead</a>.  </td><td><em>rx</em> = \token{1}  </td></tr>
<tr>
<td>ARM_CAN_OBJ_TX  </td><td>Transmit object; send message with <a class="el" href="group__can__interface__gr.html#ga0dcffd362b4093043442a030eaebbcfe">ARM_CAN_MessageSend</a>.  </td><td><em>tx</em> = \token{1}  </td></tr>
<tr>
<td>ARM_CAN_OBJ_RX_RTR_TX_DATA </td><td><a class="el" href="group__can__interface__gr.html#Remote_Frame">Remote Frame</a> Receive; when <b>RTR</b> is received data message is transmitted; set data message with <a class="el" href="group__can__interface__gr.html#ga0dcffd362b4093043442a030eaebbcfe">ARM_CAN_MessageSend</a>.  </td><td><em>rx_rtr_tx_data</em> = \token{1}  </td></tr>
<tr>
<td>ARM_CAN_OBJ_TX_RTR_RX_DATA </td><td><a class="el" href="group__can__interface__gr.html#Remote_Frame">Remote Frame</a> Transmit; a <b>RTR</b> is sent with <a class="el" href="group__can__interface__gr.html#ga0dcffd362b4093043442a030eaebbcfe">ARM_CAN_MessageSend</a> to trigger object reception; read received data message with <a class="el" href="group__can__interface__gr.html#gafc37084df5eab32f593c2744d35cf647">ARM_CAN_MessageRead</a>.  </td><td><em>tx_rtr_rx_data</em> = \token{1}  </td></tr>
</table>
<p>When the <b>object</b> is deactivated, it is not used for data communication.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__can__interface__gr.html#ga4f9bc7088704483388e14872c9d5385d" title="Add or remove filter for message reception.">ARM_CAN_ObjectSetFilter</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj_idx</td><td>Object index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">obj_cfg</td><td>Object configuration state<ul>
<li>ARM_CAN_OBJ_INACTIVE : deactivate object</li>
<li>ARM_CAN_OBJ_RX : configure object for reception</li>
<li>ARM_CAN_OBJ_TX : configure object for transmission</li>
<li>ARM_CAN_OBJ_RX_RTR_TX_DATA : configure object that on RTR reception automatically transmits Data Frame</li>
<li>ARM_CAN_OBJ_TX_RTR_RX_DATA : configure object that transmits RTR and automatically receives Data Frame </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="ga45ab314f5121cf5a1b32d9adc600e0f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga45ab314f5121cf5a1b32d9adc600e0f7">&#9670;&nbsp;</a></span>ARM_CAN_ObjectGetCapabilities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_OBJ_CAPABILITIES</a> ARM_CAN_ObjectGetCapabilities </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>obj_idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve capabilities of an object. </p>
<p>The function <b>ARM_CAN_ObjectGetCapabilities</b> retrieves the capabilities of a CAN object. The structure <a class="el" href="struct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_OBJ_CAPABILITIES</a> stores the values.</p>
<p>The parameter <em>obj_idx</em> is the message object index.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__can__interface__gr.html#ga00ec0715f6755a49dae5b60dca182630" title="Configure object.">ARM_CAN_ObjectConfigure</a> </dd>
<dd>
<a class="el" href="group__can__interface__gr.html#ga4f9bc7088704483388e14872c9d5385d" title="Add or remove filter for message reception.">ARM_CAN_ObjectSetFilter</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj_idx</td><td>Object index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_OBJ_CAPABILITIES</a> </dd></dl>

</div>
</div>
<a id="ga4f9bc7088704483388e14872c9d5385d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f9bc7088704483388e14872c9d5385d">&#9670;&nbsp;</a></span>ARM_CAN_ObjectSetFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_CAN_ObjectSetFilter </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>obj_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ARM_CAN_FILTER_OPERATION&#160;</td>
          <td class="paramname"><em>operation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add or remove filter for message reception. </p>
<p>The function <b>ARM_CAN_ObjectSetFilter</b> sets or removes the filter for message reception. Refer to <a class="el" href="group__can__interface__gr.html#can_filtering">CAN Message Filtering</a> for details on filtering.</p>
<p>The parameter <em>obj_idx</em> is the message object index. <br  />
The parameter <em>operation</em> is the operation on the filter as listed in the table below and which are defined in the structure ARM_CAN_FILTER_OPERATION.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>operation</em>   </th><th class="markdownTableHeadLeft">Operation on Filter   </th><th class="markdownTableHeadLeft">supported when <a class="el" href="struct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_OBJ_CAPABILITIES</a> data field    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_CAN_FILTER_ID_EXACT_ADD   </td><td class="markdownTableBodyLeft">Add exact ID filter   </td><td class="markdownTableBodyLeft"><em>exact_filtering</em> = \token{1}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_CAN_FILTER_ID_EXACT_REMOVE   </td><td class="markdownTableBodyLeft">Remove exact ID filter   </td><td class="markdownTableBodyLeft"><em>exact_filtering</em> = \token{1}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_CAN_FILTER_ID_RANGE_ADD   </td><td class="markdownTableBodyLeft">Add range ID filter   </td><td class="markdownTableBodyLeft"><em>range_filtering</em> = \token{1}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_CAN_FILTER_ID_RANGE_REMOVE   </td><td class="markdownTableBodyLeft">Remove range ID filter   </td><td class="markdownTableBodyLeft"><em>range_filtering</em> = \token{1}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_CAN_FILTER_ID_MASKABLE_ADD   </td><td class="markdownTableBodyLeft">Add maskable ID filter   </td><td class="markdownTableBodyLeft"><em>mask_filtering</em> = \token{1}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_CAN_FILTER_ID_MASKABLE_REMOVE   </td><td class="markdownTableBodyLeft">Remove maskable ID filter   </td><td class="markdownTableBodyLeft"><em>mask_filtering</em> = \token{1}   </td></tr>
</table>
<p>The parameter <em>id</em> is the identifier of the filter or defines the start of the filter range (depends on the filter operation). <br  />
The parameter <em>arg</em> is the mask of the filter or defines the end of the filter range (depends on the filter operation).</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__can__interface__gr.html#ga00ec0715f6755a49dae5b60dca182630" title="Configure object.">ARM_CAN_ObjectConfigure</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj_idx</td><td>Object index of object that filter should be or is assigned to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">operation</td><td>Operation on filter<ul>
<li>ARM_CAN_FILTER_ID_EXACT_ADD : add exact id filter</li>
<li>ARM_CAN_FILTER_ID_EXACT_REMOVE : remove exact id filter</li>
<li>ARM_CAN_FILTER_ID_RANGE_ADD : add range id filter</li>
<li>ARM_CAN_FILTER_ID_RANGE_REMOVE : remove range id filter</li>
<li>ARM_CAN_FILTER_ID_MASKABLE_ADD : add maskable id filter</li>
<li>ARM_CAN_FILTER_ID_MASKABLE_REMOVE : remove maskable id filter </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>ID or start of ID range (depending on filter type) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Mask or end of ID range (depending on filter type) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="ga6f634f126ac97daef2f3115aa7bfed7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6f634f126ac97daef2f3115aa7bfed7c">&#9670;&nbsp;</a></span>ARM_CAN_PowerControl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_CAN_PowerControl </td>
          <td>(</td>
          <td class="paramtype">ARM_POWER_STATE&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control CAN interface power. </p>
<p>The function <b>ARM_CAN_PowerControl</b> controls the power modes of the CAN interface.</p>
<p>The parameter <em>state</em> can be:</p><ul>
<li>ARM_POWER_FULL: Activate clocks and driver functionality as if peripheral was reset.</li>
<li>ARM_POWER_OFF: Unconditionally put peripheral into non-functional (reset) state.</li>
<li>ARM_POWER_LOW: Put peripheral into low power consumption state ready to wake up on bus event.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>Power state<ul>
<li>ARM_POWER_OFF : power off: no operation possible</li>
<li>ARM_POWER_LOW : low power mode: retain state, detect and signal wake-up events</li>
<li>ARM_POWER_FULL : power on: full operation at maximum performance </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="ga88bb27a8525503a250cca7a2c4a5d07a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga88bb27a8525503a250cca7a2c4a5d07a">&#9670;&nbsp;</a></span>ARM_CAN_SetBitrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_CAN_SetBitrate </td>
          <td>(</td>
          <td class="paramtype">ARM_CAN_BITRATE_SELECT&#160;</td>
          <td class="paramname"><em>select</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bitrate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bit_segments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set bitrate for CAN interface. </p>
<p><br  />
 The function <b>ARM_CAN_SetBitrate</b> sets the CAN communication bit rate.</p>
<p>The parameter <em>select</em> selects the bit rate affected by function call as defined in ARM_CAN_BITRATE_SELECT and listed in the table below.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>select</em>   </th><th class="markdownTableHeadLeft">CAN Mode Bit Rate    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_CAN_BITRATE_NOMINAL   </td><td class="markdownTableBodyLeft">Select nominal (flexible data-rate arbitration) bitrate (CAN 2.0B)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_CAN_BITRATE_FD_DATA   </td><td class="markdownTableBodyLeft">Select flexible data-rate data bitrate (<a class="el" href="group__can__interface__gr.html#CAN_FD">CAN_FD</a>)   </td></tr>
</table>
<p>The parameter <em>bitrate</em> is the bit rate for the selected CAN mode.</p>
<p>The parameter <em>bit_segments</em> is used to setup the time quanta for sampling (see picture below). The values listed in the table below are ORed and specify the various sampling segments. The CAN controller samples each bit on the bus at the <em>Sample Point</em>.</p>
<table class="cmtable">
<tr>
<th>Parameter <em>bit_segments</em>  </th><th>Bit <br  />
 </th><th>for <em>select</em> = ARM_CAN_BITRATE_NOMINAL <br  />
 (CAN specification) </th><th>for <em>select</em> = ARM_CAN_BITRATE_NOMINAL <br  />
 (CAN FD specification) </th><th>for <em>select</em> = ARM_CAN_BITRATE_FD_DATA <br  />
 (CAN FD specification)  </th></tr>
<tr>
<td><a class="el" href="group__can__timeseg__ctrls.html#ga01183319a5a899eafea9ffe7af73d5ea">ARM_CAN_BIT_PROP_SEG</a>(<em>x</em>) <br  />
 Propagation Time Segment <br  />
 (PROP_SEG)  </td><td>0..7  </td><td><em>x</em> = \token{[1..8]} </td><td><em>x</em> = \token{[1..32] or more} <br  />
 </td><td><em>x</em> = \token{[0..8]} <br  />
  </td></tr>
<tr>
<td><a class="el" href="group__can__timeseg__ctrls.html#ga03f1921ee97a7ebf5d767b6cacf40792">ARM_CAN_BIT_PHASE_SEG1</a>(<em>x</em>) <br  />
 Phase Buffer Segment 1 <br  />
 (PHASE_SEG1)  </td><td>8..15  </td><td><em>x</em> = \token{[1..8]} </td><td><em>x</em> = \token{[1..32] or more} <br  />
 </td><td><em>x</em> = \token{[1..8]} <br  />
  </td></tr>
<tr>
<td rowspan="2"><a class="el" href="group__can__timeseg__ctrls.html#ga76de056d56803cb7a0d01978ee981e80">ARM_CAN_BIT_PHASE_SEG2</a>(<em>x</em>) <br  />
 Phase Buffer Segment 2 <br  />
 (PHASE_SEG2)  </td><td rowspan="2">16..23  </td><td><em>x</em> = \token{[1..8]}  </td><td><em>x</em> = \token{[1..32] or more} <br  />
 </td><td><em>x</em> = \token{[1..8]} <br  />
 </td></tr>
<tr>
<td colspan="3">The maximum allowed value is \token{x = MAX (PHASE_SEG1, IPT)}. IPT = Information Processing Time. Usually, IPT = \token{2}. Exceptions apply. Read the specifications of your CAN controller.  </td></tr>
<tr>
<td rowspan="2"><a class="el" href="group__can__timeseg__ctrls.html#gab32e97fa4edf497c111dd3f0d8779269">ARM_CAN_BIT_SJW</a>(<em>x</em>) <br  />
 (Re-)Synchronization Jump Width <br  />
 (SJW).  </td><td rowspan="2">24..31  </td><td><em>x</em> = \token{[1..4]} </td><td><em>x</em> = \token{[1..4]} <br  />
 </td><td><em>x</em> = \token{[1..4]} <br  />
 </td></tr>
<tr>
<td colspan="3">The maximum allowed value is \token{x = MIN (MIN (PHASE_SEG1, PHASE_SEG2), 4)}. SJW is not allowed to be greater than either PHASE segment.   </td></tr>
</table>
<p>The picture shows a Nominal Bit Time with 10 time quanta. </p><div class="image">
<img src="CAN_Bit_Timing.png" alt=""/>
<div class="caption">
CAN Bit Timing</div></div>
 <p>The time quanta (N) per bit is: </p><div class="fragment"><div class="line">N = 1 + PROP_SEG + PHASE_SEG1 + PHASE_SEG2; <span class="comment">// note SYNC_SEG is always 1</span></div>
</div><!-- fragment --><p>The driver uses this value and the CAN clock to calculate a suitable prescaler value (P). If the driver cannot achieve the requested <em>bitrate</em> it returns with ARM_CAN_INVALID_BITRATE. The formula for the <em>bitrate</em> is: </p><div class="fragment"><div class="line">bitrate = (CAN_Clock / P) / N;</div>
</div><!-- fragment --><p><b>Example</b>: </p><div class="fragment"><div class="line">status = ptrCAN-&gt;SetBitrate    (ARM_CAN_BITRATE_NOMINAL,              <span class="comment">// Set nominal bitrate</span></div>
<div class="line">                                125000U,                              <span class="comment">// Set bitrate to 125 kbit/s</span></div>
<div class="line">                                <a class="code" href="group__can__timeseg__ctrls.html#ga01183319a5a899eafea9ffe7af73d5ea">ARM_CAN_BIT_PROP_SEG</a>(5U)   |          <span class="comment">// Set propagation segment to 5 time quanta</span></div>
<div class="line">                                <a class="code" href="group__can__timeseg__ctrls.html#ga03f1921ee97a7ebf5d767b6cacf40792">ARM_CAN_BIT_PHASE_SEG1</a>(1U) |          <span class="comment">// Set phase segment 1 to 1 time quantum (sample point at 87.5% of bit time)</span></div>
<div class="line">                                <a class="code" href="group__can__timeseg__ctrls.html#ga76de056d56803cb7a0d01978ee981e80">ARM_CAN_BIT_PHASE_SEG2</a>(1U) |          <span class="comment">// Set phase segment 2 to 1 time quantum (total bit is 8 time quanta long)</span></div>
<div class="line">                                <a class="code" href="group__can__timeseg__ctrls.html#gab32e97fa4edf497c111dd3f0d8779269">ARM_CAN_BIT_SJW</a>(1U));                 <span class="comment">// Resynchronization jump width is same as phase segment 2</span></div>
</div><!-- fragment --><p>In this example, N = 8 and with a CAN_Clock = 8MHz the prescaler (P) is calculated by the driver to 8.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">select</td><td>Bitrate selection<ul>
<li>ARM_CAN_BITRATE_NOMINAL : nominal (flexible data-rate arbitration) bitrate</li>
<li>ARM_CAN_BITRATE_FD_DATA : flexible data-rate data bitrate </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bitrate</td><td>Bitrate </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bit_segments</td><td>Bit segments settings<ul>
<li><a class="el" href="group__can__timeseg__ctrls.html#ga01183319a5a899eafea9ffe7af73d5ea">ARM_CAN_BIT_PROP_SEG(x)</a> : number of time quanta for propagation time segment</li>
<li><a class="el" href="group__can__timeseg__ctrls.html#ga03f1921ee97a7ebf5d767b6cacf40792">ARM_CAN_BIT_PHASE_SEG1(x)</a> : number of time quanta for phase buffer segment 1</li>
<li><a class="el" href="group__can__timeseg__ctrls.html#ga76de056d56803cb7a0d01978ee981e80">ARM_CAN_BIT_PHASE_SEG2(x)</a> : number of time quanta for phase buffer Segment 2</li>
<li><a class="el" href="group__can__timeseg__ctrls.html#gab32e97fa4edf497c111dd3f0d8779269">ARM_CAN_BIT_SJW(x)</a> : number of time quanta for (re-)synchronization jump width </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="ga28226a6e223f9b95b4dafb7c2f48a855"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga28226a6e223f9b95b4dafb7c2f48a855">&#9670;&nbsp;</a></span>ARM_CAN_SetMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_CAN_SetMode </td>
          <td>(</td>
          <td class="paramtype">ARM_CAN_MODE&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set operating mode for CAN interface. </p>
<p>The function <b>ARM_CAN_SetMode</b> sets the CAN bus communication mode using the parameter <em>mode</em>.</p>
<p>The table lists the values for <em>mode</em>.</p>
<table class="cmtable">
<tr>
<th>Parameter <em>mode</em>  <br  />
 </th><th>Bus Communication Mode </th><th>supported when <a class="el" href="struct_a_r_m___c_a_n___o_b_j___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_CAN_OBJ_CAPABILITIES</a> data field  </th></tr>
<tr>
<td>ARM_CAN_MODE_INITIALIZATION <br  />
 </td><td>Initialization mode; Used to setup communication parameters for the reception objects and global filtering, while peripheral is not active on the bus. Refer to <a class="el" href="group__can__interface__gr.html#can_filtering">CAN Message Filtering</a> for details. </td><td><em>always supported</em>  </td></tr>
<tr>
<td>ARM_CAN_MODE_NORMAL </td><td>Normal operation mode. Used when peripheral is in active mode to receive, transmit, and acknowledge messages on the bus. Depending on the current unit state, it can generate error or overload messages. Verify the unit state with <a class="el" href="group__can__interface__gr.html#ga676d6b567fc4ab3d44f5d7a50ec9419c">ARM_CAN_GetStatus</a>. </td><td><em>always supported</em>  </td></tr>
<tr>
<td>ARM_CAN_MODE_RESTRICTED </td><td>Restricted operation mode. Used for monitoring the bus communication non-intrusively without transmitting. </td><td><em>restricted_mode</em> = \token{1}  </td></tr>
<tr>
<td>ARM_CAN_MODE_MONITOR </td><td>Bus monitoring mode. </td><td><em>monitor_mode</em> = \token{1}  </td></tr>
<tr>
<td>ARM_CAN_MODE_LOOPBACK_INTERNAL </td><td>Test mode; loopback of CAN transmission to its receiver. No transmission visible on CAN bus. </td><td><em>internal_loopback</em> = \token{1}  </td></tr>
<tr>
<td>ARM_CAN_MODE_LOOPBACK_EXTERNAL </td><td>Test mode; loopback of CAN transmission to its receiver. Transmission is visible on CAN bus. </td><td><em>external_loopback</em> = \token{1}  </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Operating mode<ul>
<li>ARM_CAN_MODE_INITIALIZATION : initialization mode</li>
<li>ARM_CAN_MODE_NORMAL : normal operation mode</li>
<li>ARM_CAN_MODE_RESTRICTED : restricted operation mode</li>
<li>ARM_CAN_MODE_MONITOR : bus monitoring mode</li>
<li>ARM_CAN_MODE_LOOPBACK_INTERNAL : loopback internal mode</li>
<li>ARM_CAN_MODE_LOOPBACK_EXTERNAL : loopback external mode </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="gabfcaeac9e2ca25936ba5a29f2d594e7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabfcaeac9e2ca25936ba5a29f2d594e7e">&#9670;&nbsp;</a></span>ARM_CAN_SignalObjectEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ARM_CAN_SignalObjectEvent </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>obj_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal CAN object event. </p>
<p>The function <b>ARM_CAN_SignalObjectEvent</b> is a callback function registered by the function <a class="el" href="group__can__interface__gr.html#gaa72ceb25ba67e279d7432404632deb44">ARM_CAN_Initialize</a> and signals a CAN message object event.</p>
<p>The parameter <em>obj_idx</em> is the index of the message object. <br  />
The parameter <em>event</em> indicates object event that occurred during driver operation.</p>
<p>The following events can be generated:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>event</em>   </th><th class="markdownTableHeadCenter">Bit   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group___c_a_n__events.html#ga486f0f35ebc7e3b5931ee68b56703503">ARM_CAN_EVENT_SEND_COMPLETE</a>   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyLeft">Message was sent successfully by the <em>obj_idx</em> object.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group___c_a_n__events.html#ga2c1082561eeae3b2b8132e81fc241e47">ARM_CAN_EVENT_RECEIVE</a>   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyLeft">Message was received successfully by the <em>obj_idx</em> object.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group___c_a_n__events.html#ga6c2d29b5c49d5cd18e97f5931157a94c">ARM_CAN_EVENT_RECEIVE_OVERRUN</a>   </td><td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyLeft">Message was overwritten before it was read on the <em>obj_idx</em> object.   </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__can__interface__gr.html#ga0dcffd362b4093043442a030eaebbcfe">ARM_CAN_MessageSend</a> </dd>
<dd>
<a class="el" href="group__can__interface__gr.html#gafc37084df5eab32f593c2744d35cf647">ARM_CAN_MessageRead</a> </dd>
<dd>
<a class="el" href="group__can__interface__gr.html#ga00ec0715f6755a49dae5b60dca182630">ARM_CAN_ObjectConfigure</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj_idx</td><td>Object index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td><a class="el" href="group___c_a_n__events.html">CAN Object Events</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="ga38795d1ed135ce3bd87f31ef1596bccf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38795d1ed135ce3bd87f31ef1596bccf">&#9670;&nbsp;</a></span>ARM_CAN_SignalUnitEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ARM_CAN_SignalUnitEvent </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal CAN unit event. </p>
<p>The function <b>ARM_CAN_SignalUnitEvent</b> is a callback function registered by the function <a class="el" href="group__can__interface__gr.html#gaa72ceb25ba67e279d7432404632deb44">ARM_CAN_Initialize</a>.</p>
<p>The parameter <em>event</em> indicates unit event that occurred during driver operation.</p>
<p>The following callback notifications are generated:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>event</em>   </th><th class="markdownTableHeadCenter">Value   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group___c_a_n__unit__events.html#gaa2347c172c8a8f42ac66cb42cd7a08db">ARM_CAN_EVENT_UNIT_INACTIVE</a>   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyLeft">Unit entered Inactive state.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group___c_a_n__unit__events.html#ga0e65231ccb20684d7c8eac80385f8c18">ARM_CAN_EVENT_UNIT_ACTIVE</a>   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyLeft">Unit entered Error Active state.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group___c_a_n__unit__events.html#ga3690f864edd2e124f4f9875fdde9a2eb">ARM_CAN_EVENT_UNIT_WARNING</a>   </td><td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyLeft">Unit entered Error Warning state (one or both error counters &gt;= \token{96}).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group___c_a_n__unit__events.html#ga9c529d6697fe21e69639224322f8c4b4">ARM_CAN_EVENT_UNIT_PASSIVE</a>   </td><td class="markdownTableBodyCenter">3   </td><td class="markdownTableBodyLeft">Unit entered Error Passive state.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group___c_a_n__unit__events.html#gafa4f992a97b4ca0f079aec2990a69bed">ARM_CAN_EVENT_UNIT_BUS_OFF</a>   </td><td class="markdownTableBodyCenter">4   </td><td class="markdownTableBodyLeft">Unit entered Bus-off state.   </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__can__interface__gr.html#ga676d6b567fc4ab3d44f5d7a50ec9419c">ARM_CAN_GetStatus</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td><a class="el" href="group___c_a_n__unit__events.html">CAN Unit Events</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="ga1e3e364b64f2ab277399e3279cce5ef8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1e3e364b64f2ab277399e3279cce5ef8">&#9670;&nbsp;</a></span>ARM_CAN_Uninitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_CAN_Uninitialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>De-initialize CAN interface. </p>
<p>The function <b>ARM_CAN_Uninitialize</b> de-initializes the resources of the CAN interface. It is called to release the software resources used by the interface such as deallocate any RTOS objects, dynamic memory and pin de-configuration.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
