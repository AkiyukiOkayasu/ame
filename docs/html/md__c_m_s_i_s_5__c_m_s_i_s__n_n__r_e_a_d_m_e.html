<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AME: CMSIS NN</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AME
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__c_m_s_i_s_5__c_m_s_i_s__n_n__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">CMSIS NN </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md80"></a>
About</h1>
<p>This page give a quick overview of the functions available and key differences between them.</p>
<p><b>Note:</b> The GitHub documentation does not follow the <em>develop</em> branch but rather the last official release in the <em>master</em> branch. Consequently, the group documentation linked to in the table table might not have the listed API. Please refer to the description in the <a href="https://github.com/ARM-software/CMSIS_5/blob/develop/CMSIS/NN/Include/arm_nnfunctions.h">header</a> file instead.</p>
<h1><a class="anchor" id="autotoc_md81"></a>
Legacy vs TFL micro compliant APIs</h1>
<p>There are two kinds of APIs available in the CMSIS-NN repository; One that supports a legacy symmetric quantization scheme[1] and one that supports TFL micro's symmetric quantization scheme. One of the main differences is how the quantization is performed. The legacy APIs have a fixed point format with power of 2 scaling. This simplifies the re-quantization to a cycle efficient shift operation. No new development is done on the legacy functions and all of the new development is on the functions that support TFL micro. The table below highlights some of the differences between the two formats for convolution related functions. The TFL micro compliant APIs in most cases have a _s8 suffix and is always specified in the API header file.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Operation   </th><th class="markdownTableHeadLeft">Legacy APIs   </th><th class="markdownTableHeadLeft">TFL micro compliant APIs    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Core loop   </td><td class="markdownTableBodyLeft">No input or filter offset   </td><td class="markdownTableBodyLeft">Input and/or filter offset    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Re-quantization   </td><td class="markdownTableBodyLeft">Shift and saturate in one instruction. ~ 5 cycles   </td><td class="markdownTableBodyLeft">Greater than 200 cycles for one output element    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Quantization   </td><td class="markdownTableBodyLeft">Per layer quantization   </td><td class="markdownTableBodyLeft">Per-channel quantization    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Output offset   </td><td class="markdownTableBodyLeft">No   </td><td class="markdownTableBodyLeft">Per-layer output offset    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Fused Activation   </td><td class="markdownTableBodyLeft">No   </td><td class="markdownTableBodyLeft">Yes   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md82"></a>
TFL micro compliant APIs</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Group   </th><th class="markdownTableHeadLeft">API   </th><th class="markdownTableHeadLeft">Base Operator   </th><th class="markdownTableHeadLeft">Input Constraints   </th><th class="markdownTableHeadLeft">Additional memory required for <br  />
 optimizations (bytes)   </th><th class="markdownTableHeadLeft">DSP Optimized   </th><th class="markdownTableHeadLeft">MVE Optimized   </th><th class="markdownTableHeadLeft">Other comments    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft" colspan="5"><a href="https://arm-software.github.io/CMSIS_5/NN/html/group__NNConv.html">Conv</a>   </td><td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft" colspan="2"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft"><a class="el" href="group___n_n_conv.html#ga5ac772a94937e1efdab145a2ab4c0927" title="s8 convolution layer wrapper function with the main purpose to call the optimal kernel available in c...">arm_convolve_wrapper_s8()</a>   </td><td class="markdownTableBodyLeft">CONV   </td><td class="markdownTableBodyLeft">dilation = 1   </td><td class="markdownTableBodyLeft">n.a.   </td><td class="markdownTableBodyLeft">Yes   </td><td class="markdownTableBodyLeft">Yes   </td><td class="markdownTableBodyLeft">The additional memory required depends on the optimal convolution function called    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft"><a class="el" href="group___n_n_conv.html#ga34bb5c05805ca7d5ea9681fcad8a711d" title="Basic s8 convolution function.">arm_convolve_s8()</a>   </td><td class="markdownTableBodyLeft">CONV   </td><td class="markdownTableBodyLeft">dilation = 1   </td><td class="markdownTableBodyLeft">4 * ker_x * ker_y * input_ch   </td><td class="markdownTableBodyLeft">Yes   </td><td class="markdownTableBodyLeft" colspan="2">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"></td><td class="markdownTableBodyLeft"><a class="el" href="group___n_n_conv.html#ga53608c814d9b8a458f4d87f8f40051b7" title="Fast s8 version for 1x1 convolution (non-square shape)">arm_convolve_1x1_s8_fast()</a>   </td><td class="markdownTableBodyLeft">CONV   </td><td class="markdownTableBodyLeft">dilation = 1 <br  />
 ker_x = 1, ker_y = 1 <br  />
 pad = 0<br  />
 stride = 1<br  />
 input_ch % 4 = 0   </td><td class="markdownTableBodyLeft">0   </td><td class="markdownTableBodyLeft">Yes   </td><td class="markdownTableBodyLeft" colspan="2">Yes   </td></tr>
</table>
<p>||arm_convolve_1_n_s8() | CONV | dilation = 1 <br  />
 output_y % 4 = 0 | No |Yes || || <a class="el" href="group___n_n_conv.html#ga558337f134d84dac2c312c5175bd67de" title="Optimized s8 depthwise convolution function for 3x3 kernel size with some constraints on the input ar...">arm_depthwise_conv_3x3_s8()</a> | DEPTHWISE_CONV | dilation = 1 <br  />
 depth_multiplier = 1 <br  />
 pad_x &lt;= 1 | No|No|No| Preferred function for 3x3 kernel size for DSP extension.  For MVE, use <a class="el" href="group___n_n_conv.html#gab9dc832c407c0fe0f4d6fbb063e85e97" title="Optimized s8 depthwise convolution function with constraint that in_channel equals out_channel....">arm_depthwise_conv_s8_opt()</a>|| | | <a class="el" href="group___n_n_conv.html#gad8a6832cf0c8a8862fc8cd9ec95f40a9" title="Basic s8 depthwise convolution function that doesn&#39;t have any constraints on the input dimensions.">arm_depthwise_conv_s8()</a> | DEPTHWISE_CONV | dilation = 1 | No|No|No|| || <a class="el" href="group___n_n_conv.html#gab9dc832c407c0fe0f4d6fbb063e85e97" title="Optimized s8 depthwise convolution function with constraint that in_channel equals out_channel....">arm_depthwise_conv_s8_opt()</a>| DEPTHWISE_CONV | dilation = 1 <br  />
 depth_multiplier = 1 | DSP: 2 * ker_x * ker_y * input_ch <br  />
 MVE: 2 * DSP + 4 | Yes| Yes| Best case is when channels are multiple of 4 or <br  />
at the least &gt;= 4 | |<a href="https://arm-software.github.io/CMSIS_5/NN/html/group__FC.html">Fully Connected</a>||||| | | | || <a class="el" href="group___f_c.html#ga30d44fed122f2e159a417f9c12181ded" title="Basic s8 Fully Connected function.">arm_fully_connected_s8()</a> |FULLY CONNECTED &amp; <br  />
 MAT MUL | None | 0 | Yes | Yes | | |<a href="https://arm-software.github.io/CMSIS_5/NN/html/group__Pooling.html">Pooling</a>||||| | || || <a class="el" href="group___pooling.html#gafa69cdb8a711ddef477d330204fa412c" title="s8 average pooling function.">arm_avgpool_s8()</a> | AVERAGE POOL | None | input_ch * 2<br  />
(DSP only) | Yes| Yes| Best case case is when channels are multiple of 4 or <br  />
 at the least &gt;= 4 | || arm_maxpool_s8() | MAX POOL | None | None | Yes| Yes| | |<a href="https://arm-software.github.io/CMSIS_5/NN/html/group__Softmax.html">Softmax</a>||||| | || ||arm_softmax_q7()| SOFTMAX | None | None | Yes | No | Not bit exact to TFLu but can be up to 70x faster | ||arm_softmax_s8()| SOFTMAX | None | None | No | Yes | Bit exact to TFLu | ||arm_softmax_u8()| SOFTMAX | None | None | No | No | Bit exact to TFLu | |<a href="https://arm-software.github.io/CMSIS_5/NN/html/group__SVDF.html">SVDF</a>||||| | || ||arm_svdf_s8()| SVDF | None | None | Yes | No | Bit exact to TFLu | |<a href="https://arm-software.github.io/CMSIS_5/NN/html/group__groupNN.html">Misc</a>||||| | || ||arm_reshape_s8()| SOFTMAX | None | None | No | No | | ||arm_elementwise_add_s8()| ELEMENTWISE ADD | None | None | Yes| Yes| Reshape is not done in this function <br  />
 Only minor improvements are expected | ||arm_elementwise_mul_s8()| ELEMENTWISE MUL | None | None | Yes| Yes| Reshape is not done in this function <br  />
 Only minor improvements are expected | ||arm_relu_q7() | RELU | None | None | Yes| No| ||arm_relu6_s8() | RELU | None | None | Yes| No| |<a href="https://arm-software.github.io/CMSIS_5/NN/html/group__groupNN.html">Concat</a>||||| | || ||arm_concatenation_s8_w() | CONCAT | None | None | No| No|| ||arm_concatenation_s8_x() | CONCAT | None | None | No| No|| ||arm_concatenation_s8_y() | CONCAT | None | None | No| No|| ||arm_concatenation_s8_z() | CONCAT | None | None | No| No||</p>
<h1><a class="anchor" id="autotoc_md83"></a>
Reference</h1>
<p>[1] Legacy CMSIS-NN and how to use it <a href="https://developer.arm.com/solutions/machine-learning-on-arm/developer-material/how-to-guides/converting-a-neural-network-for-arm-cortex-m-with-cmsis-nn/single-page">https://developer.arm.com/solutions/machine-learning-on-arm/developer-material/how-to-guides/converting-a-neural-network-for-arm-cortex-m-with-cmsis-nn/single-page</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
