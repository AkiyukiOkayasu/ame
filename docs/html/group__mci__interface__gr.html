<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AME: MCI Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AME
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__mci__interface__gr.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MCI Interface</div>  </div>
</div><!--header-->
<div class="contents">

<p>Driver API for Memory Card Interface using SD/MMC interface (Driver_MCI.h)  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__mci__event__gr"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__event__gr.html">MCI Events</a></td></tr>
<tr class="memdesc:group__mci__event__gr"><td class="mdescLeft">&#160;</td><td class="mdescRight">The MCI driver generates call back events that are notified via the function <a class="el" href="group__mci__interface__gr.html#gaac2dbd1c1a98436938c5d0d6248cb700">ARM_MCI_SignalEvent</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__mci__control__gr"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__control__gr.html">MCI Control Codes</a></td></tr>
<tr class="memdesc:group__mci__control__gr"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure and control the MCI using the <a class="el" href="group__mci__interface__gr.html#gaec0506a2aa4ae75cf6bc02528f36fe30">ARM_MCI_Control</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__mci__send__command__flags__ctrls"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__send__command__flags__ctrls.html">MCI Send Command Flags</a></td></tr>
<tr class="memdesc:group__mci__send__command__flags__ctrls"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specify various options for sending commands to the card and the expected response. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__mci__transfer__ctrls"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__transfer__ctrls.html">MCI Transfer Controls</a></td></tr>
<tr class="memdesc:group__mci__transfer__ctrls"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specify data transfer mode. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__mci__card__power__ctrls"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__card__power__ctrls.html">MCI Card Power Controls</a></td></tr>
<tr class="memdesc:group__mci__card__power__ctrls"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specify Memory Card Power supply voltage. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_a_r_m___d_r_i_v_e_r___m_c_i.html">ARM_DRIVER_MCI</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_a_r_m___m_c_i___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_MCI_CAPABILITIES</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_a_r_m___m_c_i___s_t_a_t_u_s.html">ARM_MCI_STATUS</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga0d14651f6788c1ffd81544602565faf1"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#ga0d14651f6788c1ffd81544602565faf1">ARM_MCI_SignalEvent_t</a>) (uint32_t event)</td></tr>
<tr class="memdesc:ga0d14651f6788c1ffd81544602565faf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to <a class="el" href="group__mci__interface__gr.html#gaac2dbd1c1a98436938c5d0d6248cb700">ARM_MCI_SignalEvent</a> : Signal MCI Card Event.  <a href="group__mci__interface__gr.html#ga0d14651f6788c1ffd81544602565faf1">More...</a><br /></td></tr>
<tr class="separator:ga0d14651f6788c1ffd81544602565faf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3418183015dbf3025b94eebaedb00ab1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#ga3418183015dbf3025b94eebaedb00ab1">ARM_MCI_GetVersion</a> (void)</td></tr>
<tr class="memdesc:ga3418183015dbf3025b94eebaedb00ab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get driver version.  <a href="group__mci__interface__gr.html#ga3418183015dbf3025b94eebaedb00ab1">More...</a><br /></td></tr>
<tr class="separator:ga3418183015dbf3025b94eebaedb00ab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e5a78b6e6409189833a0b72a0a3c48a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_a_r_m___m_c_i___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_MCI_CAPABILITIES</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#ga7e5a78b6e6409189833a0b72a0a3c48a">ARM_MCI_GetCapabilities</a> (void)</td></tr>
<tr class="memdesc:ga7e5a78b6e6409189833a0b72a0a3c48a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get driver capabilities.  <a href="group__mci__interface__gr.html#ga7e5a78b6e6409189833a0b72a0a3c48a">More...</a><br /></td></tr>
<tr class="separator:ga7e5a78b6e6409189833a0b72a0a3c48a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f34d4ab362e596ddaf23aac093268cf"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#ga6f34d4ab362e596ddaf23aac093268cf">ARM_MCI_Initialize</a> (<a class="el" href="group__mci__interface__gr.html#ga0d14651f6788c1ffd81544602565faf1">ARM_MCI_SignalEvent_t</a> cb_event)</td></tr>
<tr class="memdesc:ga6f34d4ab362e596ddaf23aac093268cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the Memory Card Interface.  <a href="group__mci__interface__gr.html#ga6f34d4ab362e596ddaf23aac093268cf">More...</a><br /></td></tr>
<tr class="separator:ga6f34d4ab362e596ddaf23aac093268cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef8183e77797e74997551d03646d42c2"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#gaef8183e77797e74997551d03646d42c2">ARM_MCI_Uninitialize</a> (void)</td></tr>
<tr class="memdesc:gaef8183e77797e74997551d03646d42c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">De-initialize Memory Card Interface.  <a href="group__mci__interface__gr.html#gaef8183e77797e74997551d03646d42c2">More...</a><br /></td></tr>
<tr class="separator:gaef8183e77797e74997551d03646d42c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19752749d04ed22dc91c4294645e0244"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#ga19752749d04ed22dc91c4294645e0244">ARM_MCI_PowerControl</a> (ARM_POWER_STATE state)</td></tr>
<tr class="memdesc:ga19752749d04ed22dc91c4294645e0244"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control Memory Card Interface Power.  <a href="group__mci__interface__gr.html#ga19752749d04ed22dc91c4294645e0244">More...</a><br /></td></tr>
<tr class="separator:ga19752749d04ed22dc91c4294645e0244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab161f80e0eda2815f3e0ebbba1314ff0"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#gab161f80e0eda2815f3e0ebbba1314ff0">ARM_MCI_CardPower</a> (uint32_t voltage)</td></tr>
<tr class="memdesc:gab161f80e0eda2815f3e0ebbba1314ff0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Memory Card Power supply voltage.  <a href="group__mci__interface__gr.html#gab161f80e0eda2815f3e0ebbba1314ff0">More...</a><br /></td></tr>
<tr class="separator:gab161f80e0eda2815f3e0ebbba1314ff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga012fca8f1ce5366fce14b708c771c635"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#ga012fca8f1ce5366fce14b708c771c635">ARM_MCI_ReadCD</a> (void)</td></tr>
<tr class="memdesc:ga012fca8f1ce5366fce14b708c771c635"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read Card Detect (CD) state.  <a href="group__mci__interface__gr.html#ga012fca8f1ce5366fce14b708c771c635">More...</a><br /></td></tr>
<tr class="separator:ga012fca8f1ce5366fce14b708c771c635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d70286918405ac81fa795c7d09dc6fd"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#ga3d70286918405ac81fa795c7d09dc6fd">ARM_MCI_ReadWP</a> (void)</td></tr>
<tr class="memdesc:ga3d70286918405ac81fa795c7d09dc6fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read Write Protect (WP) state.  <a href="group__mci__interface__gr.html#ga3d70286918405ac81fa795c7d09dc6fd">More...</a><br /></td></tr>
<tr class="separator:ga3d70286918405ac81fa795c7d09dc6fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a431da89feabc2b4bc0c27943dff6f2"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#ga5a431da89feabc2b4bc0c27943dff6f2">ARM_MCI_SendCommand</a> (uint32_t cmd, uint32_t arg, uint32_t flags, uint32_t *response)</td></tr>
<tr class="memdesc:ga5a431da89feabc2b4bc0c27943dff6f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send Command to card and get the response.  <a href="group__mci__interface__gr.html#ga5a431da89feabc2b4bc0c27943dff6f2">More...</a><br /></td></tr>
<tr class="separator:ga5a431da89feabc2b4bc0c27943dff6f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaec681bcd8e6811c5743e33ee0f35ed1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#gaaec681bcd8e6811c5743e33ee0f35ed1">ARM_MCI_SetupTransfer</a> (uint8_t *data, uint32_t block_count, uint32_t block_size, uint32_t mode)</td></tr>
<tr class="memdesc:gaaec681bcd8e6811c5743e33ee0f35ed1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup read or write transfer operation.  <a href="group__mci__interface__gr.html#gaaec681bcd8e6811c5743e33ee0f35ed1">More...</a><br /></td></tr>
<tr class="separator:gaaec681bcd8e6811c5743e33ee0f35ed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3dfcf7b7186b711f9b63a096be816fe5"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#ga3dfcf7b7186b711f9b63a096be816fe5">ARM_MCI_AbortTransfer</a> (void)</td></tr>
<tr class="memdesc:ga3dfcf7b7186b711f9b63a096be816fe5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort current read/write data transfer.  <a href="group__mci__interface__gr.html#ga3dfcf7b7186b711f9b63a096be816fe5">More...</a><br /></td></tr>
<tr class="separator:ga3dfcf7b7186b711f9b63a096be816fe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaec0506a2aa4ae75cf6bc02528f36fe30"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#gaec0506a2aa4ae75cf6bc02528f36fe30">ARM_MCI_Control</a> (uint32_t control, uint32_t arg)</td></tr>
<tr class="memdesc:gaec0506a2aa4ae75cf6bc02528f36fe30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control MCI Interface.  <a href="group__mci__interface__gr.html#gaec0506a2aa4ae75cf6bc02528f36fe30">More...</a><br /></td></tr>
<tr class="separator:gaec0506a2aa4ae75cf6bc02528f36fe30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d61aa42ce78d1864fa928c1f273cbd9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_a_r_m___m_c_i___s_t_a_t_u_s.html">ARM_MCI_STATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#ga8d61aa42ce78d1864fa928c1f273cbd9">ARM_MCI_GetStatus</a> (void)</td></tr>
<tr class="memdesc:ga8d61aa42ce78d1864fa928c1f273cbd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get MCI status.  <a href="group__mci__interface__gr.html#ga8d61aa42ce78d1864fa928c1f273cbd9">More...</a><br /></td></tr>
<tr class="separator:ga8d61aa42ce78d1864fa928c1f273cbd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac2dbd1c1a98436938c5d0d6248cb700"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mci__interface__gr.html#gaac2dbd1c1a98436938c5d0d6248cb700">ARM_MCI_SignalEvent</a> (uint32_t event)</td></tr>
<tr class="memdesc:gaac2dbd1c1a98436938c5d0d6248cb700"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function that signals a MCI Card Event.  <a href="group__mci__interface__gr.html#gaac2dbd1c1a98436938c5d0d6248cb700">More...</a><br /></td></tr>
<tr class="separator:gaac2dbd1c1a98436938c5d0d6248cb700"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Driver API for Memory Card Interface using SD/MMC interface (Driver_MCI.h) </p>
<p>The <b>Memory Card Interface</b> (MCI) implements the hardware abstraction layer for Secure Digital (SD) and Multi Media Card (MMC) memory that is typically used as file storage. For embedded systems, SD/MMC devices are available as memory cards in several forms (SD, miniSD, microSD, MMC, MMCmicro) or as non-removable device es that are directly soldered to the PCB (eMMC). <br  />
</p>
<p><b>References:</b> </p><ul>
<li>Wikipedia offers more information about the <a href="http://en.wikipedia.org/wiki/SD_card" target="_blank"><b>Secure Digital</b> memory</a>.</li>
<li>Wikipedia offers more information about the <a href="http://en.wikipedia.org/wiki/MultiMediaCard" target="_blank"><b>MultiMediaCard</b></a>.</li>
<li>The SD Association provides detailed documentation under <a href="http://www.sdcard.org">www.sdcard.org</a>.</li>
<li>The MultiMediaCard Association (merged with JEDEC) provides detailed documentation under <a href="http://www.jedec.org">www.jedec.org</a>.</li>
</ul>
<p><b>Block Diagram</b></p>
<p>The MCI driver allows you to exchange data of the SD/MMC memory via SD/MMC interface.</p>
<p>The following modes are supported by SD/MMC memory cards:</p>
<ul>
<li>SPI bus mode: Serial Peripheral Interface Bus supported by most microcontrollers.</li>
<li>1-bit SD/MMC Bus mode: proprietary data transfer protocol supported by SD/MMC interfaces.</li>
<li>4-bit SD/MMC Bus mode: high-speed version of the SD/MMC interface using 4 data I/O pins.</li>
<li>8-bit SD/MMC Bus mode: high-speed version of the SD/MMC interface using 8 data I/O pins.</li>
</ul>
<div class="image">
<img src="SPI_BusMode.png" alt=""/>
<div class="caption">
SD memory connected via SPI interface</div></div>
 <p>&#160;</p>
<div class="image">
<img src="SD_1BitBusMode.png" alt=""/>
<div class="caption">
SD memory connected via 1-bit SD Bus Mode</div></div>
 <p>&#160;</p>
<div class="image">
<img src="SD_4BitBusMode.png" alt=""/>
<div class="caption">
SD memory connected via 4-bit SD Bus Mode</div></div>
<p><b>MCI API</b></p>
<p>The following header files define the Application Programming Interface (API) for the MCI interface:</p><ul>
<li><b>Driver_MCI.h</b> : Driver API for Memory Card Interface using SD/MMC interface</li>
</ul>
<p>The driver implementation is a typical part of the Device Family Pack (DFP) that supports the peripherals of the microcontroller family.</p>
<dl class="section note"><dt>Note</dt><dd>For parameters, the value marked with (default) is the setting after the driver initialization.</dd></dl>
<p><b>Driver Functions</b></p>
<p>The driver functions are published in the access struct as explained in DriverFunctions</p><ul>
<li><a class="el" href="struct_a_r_m___d_r_i_v_e_r___m_c_i.html">ARM_DRIVER_MCI</a> : access struct for MCI driver functions</li>
</ul>
<p><b>Example Code</b></p>
<p>The following example code shows the usage of the MCI interface.</p>
<div class="fragment"></div><!-- fragment --> <h2 class="groupheader">Typedef Documentation</h2>
<a id="ga0d14651f6788c1ffd81544602565faf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d14651f6788c1ffd81544602565faf1">&#9670;&nbsp;</a></span>ARM_MCI_SignalEvent_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ARM_MCI_SignalEvent_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pointer to <a class="el" href="group__mci__interface__gr.html#gaac2dbd1c1a98436938c5d0d6248cb700">ARM_MCI_SignalEvent</a> : Signal MCI Card Event. </p>
<p>Provides the typedef for the callback function <a class="el" href="group__mci__interface__gr.html#gaac2dbd1c1a98436938c5d0d6248cb700">ARM_MCI_SignalEvent</a>.</p>
<p><b>Parameter for:</b></p><ul>
<li><a class="el" href="group__mci__interface__gr.html#ga6f34d4ab362e596ddaf23aac093268cf">ARM_MCI_Initialize</a> </li>
</ul>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3dfcf7b7186b711f9b63a096be816fe5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3dfcf7b7186b711f9b63a096be816fe5">&#9670;&nbsp;</a></span>ARM_MCI_AbortTransfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_MCI_AbortTransfer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Abort current read/write data transfer. </p>
<p>The function <b>ARM_MCI_AbortTransfer</b> aborts the active data transfer operation initiated with <a class="el" href="group__mci__interface__gr.html#ga5a431da89feabc2b4bc0c27943dff6f2">ARM_MCI_SendCommand</a>.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="gab161f80e0eda2815f3e0ebbba1314ff0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab161f80e0eda2815f3e0ebbba1314ff0">&#9670;&nbsp;</a></span>ARM_MCI_CardPower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_MCI_CardPower </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>voltage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Memory Card Power supply voltage. </p>
<p>The function <b>ARM_MCI_CardPower</b> operates the memory card power supply voltage.</p>
<p>The parameter <em>voltage</em> sets the voltage. Not every voltage might be supported by the driver implementation. The structure <a class="el" href="struct_a_r_m___m_c_i___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_MCI_CAPABILITIES</a> encodes the supported voltage. Retrieve the information with the function <a class="el" href="group__mci__interface__gr.html#ga7e5a78b6e6409189833a0b72a0a3c48a">ARM_MCI_GetCapabilities</a> and verify the data fields.</p>
<p>The following values:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>voltage</em>   </th><th class="markdownTableHeadLeft">Description   </th><th class="markdownTableHeadNone">supported when <a class="el" href="struct_a_r_m___m_c_i___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_MCI_CAPABILITIES</a>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_POWER_VDD_OFF   </td><td class="markdownTableBodyLeft">VDD (VCC) turned off   </td><td class="markdownTableBodyNone"><em>always supported</em>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_POWER_VDD_3V3   </td><td class="markdownTableBodyLeft">VDD (VCC) = \token{3.3V}   </td><td class="markdownTableBodyNone">data field <em>vdd</em> = \token{1}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_POWER_VDD_1V8   </td><td class="markdownTableBodyLeft">VDD (VCC) = \token{1.8V}   </td><td class="markdownTableBodyNone">data field <em>vdd_1v8</em> = \token{1}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_POWER_VCCQ_OFF   </td><td class="markdownTableBodyLeft">eMMC VCCQ turned off   </td><td class="markdownTableBodyNone"><em>always supported</em>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_POWER_VCCQ_3V3   </td><td class="markdownTableBodyLeft">eMMC VCCQ = \token{3.3V}   </td><td class="markdownTableBodyNone">data field <em>vccq</em> = \token{1}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_POWER_VCCQ_1V8   </td><td class="markdownTableBodyLeft">eMMC VCCQ = \token{1.8V}   </td><td class="markdownTableBodyNone">data field <em>vccq_1v8</em> = \token{1}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_POWER_VCCQ_1V2   </td><td class="markdownTableBodyLeft">eMMC VCCQ = \token{1.2V}   </td><td class="markdownTableBodyNone">data field <em>vccq_1v2</em> = \token{1}   </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">voltage</td><td>Memory Card Power supply voltage </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="gaec0506a2aa4ae75cf6bc02528f36fe30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaec0506a2aa4ae75cf6bc02528f36fe30">&#9670;&nbsp;</a></span>ARM_MCI_Control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_MCI_Control </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control MCI Interface. </p>
<p>Th function <b>ARM_MCI_Control</b> controls the MCI interface and executes various operations.</p>
<p>The parameter <em>control</em> specifies the operation. <br  />
 Values for <em>control</em> cannot be ORed, but must be called separately in the code. <br  />
The parameter <em>arg</em> provides, depending on the operation, additional information or sets values.</p>
<dl class="section note"><dt>Note</dt><dd>For parameters, the values marked with (default) are the setting after the driver initialization.</dd></dl>
<p>The table lists values for the parameter <em>control</em>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>control</em>   </th><th class="markdownTableHeadLeft">Operation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_SPEED   </td><td class="markdownTableBodyLeft">Set the Bus Speed. The parameter <em>arg</em> specifies the speed in bits/s; The function returns the bus speed configured in bits/s.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_SPEED_MODE   </td><td class="markdownTableBodyLeft">Set the Bus Speed Mode. Predefined values for <em>arg</em> are listed in the table <b>Bus Speed Mode</b>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_CMD_MODE   </td><td class="markdownTableBodyLeft">Set the CMD Line Mode. Predefined values for <em>arg</em> are listed in the table <b>Bus CMD Line Mode</b>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_DATA_WIDTH   </td><td class="markdownTableBodyLeft">Set data bus width. Predefined values for <em>arg</em> are encoded in <b>Bus Data Width</b>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_DRIVER_STRENGTH   </td><td class="markdownTableBodyLeft">Set driver strength. Predefined values for <em>arg</em> are listed in the table <b>Driver Type</b>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_CONTROL_RESET   </td><td class="markdownTableBodyLeft">Control optional RST_n Pin (eMMC). The parameter <em>arg</em> can have the values \token{[0:inactive(default); 1:active]}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_CONTROL_CLOCK_IDLE   </td><td class="markdownTableBodyLeft">Control clock generation on CLK Pin when idle. The parameter <em>arg</em> can have the values \token{[0:disabled; 1:enabled]}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__mci__mode__ctrls.html#ga98853f60bdc085aeeccd66f7bdf22d3d">ARM_MCI_UHS_TUNING_OPERATION</a>   </td><td class="markdownTableBodyLeft">Sampling clock Tuning operation (SD UHS-I). The parameter <em>arg</em> can have the values \token{[0:reset; 1:execute]}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__mci__mode__ctrls.html#gabd3af448e26da5657c1c5a03330476b7">ARM_MCI_UHS_TUNING_RESULT</a>   </td><td class="markdownTableBodyLeft">Sampling clock Tuning result (SD UHS-I). Returns \token{[0:done; 1:in progress; -1:error]}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_DATA_TIMEOUT   </td><td class="markdownTableBodyLeft">Set Data timeout; The parameter <em>arg</em> sets the timeout in bus cycles.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_CSS_TIMEOUT   </td><td class="markdownTableBodyLeft">Set Command Completion Signal (CCS) timeout. The parameter <em>arg</em> sets timeout in bus cycles.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__mci__mode__ctrls.html#ga19fd7d3b74ac48ca74a2e138b3ee9963">ARM_MCI_MONITOR_SDIO_INTERRUPT</a>   </td><td class="markdownTableBodyLeft">Monitor SD I/O interrupt. The parameter <em>arg</em> can have the values \token{[0:disabled(default); 1:enabled]}. Monitoring is automatically disabled when an interrupt is recognized.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_CONTROL_READ_WAIT   </td><td class="markdownTableBodyLeft">Control Read/Wait states for SD I/O. The parameter <em>arg</em> can have the values \token{[0:disabled(default); 1:enabled]}.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_SUSPEND_TRANSFER   </td><td class="markdownTableBodyLeft">Suspend Data transfer (SD I/O). Returns the number of remaining bytes to transfer.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_RESUME_TRANSFER   </td><td class="markdownTableBodyLeft">Resume Data transfer (SD I/O).   </td></tr>
</table>
<p><b>Bus Speed Mode</b></p>
<p>The function <a class="el" href="group__mci__interface__gr.html#ga7e5a78b6e6409189833a0b72a0a3c48a">ARM_MCI_GetCapabilities</a> lists the supported bus speed modes. Initially, all SD cards use a 3.3 volt electrical interface. Some SD cards can switch to 1.8 volt operation. For example, the use of ultra-high-speed (UHS) SD cards requires 1.8 volt operation and a 4-bit bus data width. The bit field ARM_MCI_CAPABILITIES.uhs_signaling encodes whether the driver supports 1.8 volt UHS signaling.</p>
<p>The <em>control</em> operation <b>ARM_MCI_BUS_SPEED_MODE</b> sets the bus speed mode using the parameter <em>arg</em>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>arg</em>   </th><th class="markdownTableHeadLeft">Bus Speed Mode    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_DEFAULT_SPEED (default)   </td><td class="markdownTableBodyLeft">Set the bus speed for SD/MMC cards: Default Speed mode up to \token{[25;26]MHz}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_HIGH_SPEED   </td><td class="markdownTableBodyLeft">Set the bus speed for SD/MMC: High Speed mode up to \token{[50;52]MHz}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_UHS_SDR12   </td><td class="markdownTableBodyLeft">Set the bus speed for SD: SDR12 (Single Data Rate) up to \token{25MHz, 12.5MB/s: UHS-I (Ultra High Speed) 1.8V signalling}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_UHS_SDR25   </td><td class="markdownTableBodyLeft">Set the bus speed for SD: SDR25 (Single Data Rate) up to \token{50MHz, 25 MB/s: UHS-I (Ultra High Speed) 1.8V signalling}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_UHS_SDR50   </td><td class="markdownTableBodyLeft">Set the bus speed for SD: SDR50 (Single Data Rate) up to \token{100MHz, 50 MB/s: UHS-I (Ultra High Speed) 1.8V signalling}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_UHS_SDR104   </td><td class="markdownTableBodyLeft">Set the bus speed for SD: SDR104 (Single Data Rate) up to \token{208MHz, 104 MB/s: UHS-I (Ultra High Speed) 1.8V signalling}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_UHS_DDR50   </td><td class="markdownTableBodyLeft">Set the bus speed for SD: DDR50 (Dual Data Rate) up to \token{50MHz, 50 MB/s: UHS-I (Ultra High Speed) 1.8V signalling}   </td></tr>
</table>
<p><b>Bus CMD Line Mode</b></p>
<p>The <em>control</em> operation <b>ARM_MCI_BUS_CMD_MODE</b> sets the bus command line mode using the parameter <em>arg</em>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>arg</em>   </th><th class="markdownTableHeadLeft">Bus CMD Line Mode    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_CMD_PUSH_PULL (default)   </td><td class="markdownTableBodyLeft">Set the Push-Pull CMD line    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_CMD_OPEN_DRAIN   </td><td class="markdownTableBodyLeft">Set the Open Drain CMD line (MMC only)   </td></tr>
</table>
<p><b>Bus Data Width</b></p>
<p>Specifies the bus data width (the number of data I/O pins on the SD/MMC interface).</p>
<p>For high speed memory cards, a 4-bit bus data width should be used (or 8-bit for eMMC). The bit fields ARM_MCI_CAPABILITIES.data_width_4 and ARM_MCI_CAPABILITIES.data_width_8 encode whether the driver supports a specific bus data with.</p>
<p>The <em>control</em> operation <b>ARM_MCI_BUS_DATA_WIDTH</b> sets the bus data width using the parameter <em>arg</em>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>arg</em>   </th><th class="markdownTableHeadLeft">Bus Data Width    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_DATA_WIDTH_1 (default)   </td><td class="markdownTableBodyLeft">Set the Bus data width to \token{1 bit}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_DATA_WIDTH_4   </td><td class="markdownTableBodyLeft">Set the Bus data width to \token{4 bits}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_DATA_WIDTH_8   </td><td class="markdownTableBodyLeft">Set the Bus data width to \token{8 bits}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_DATA_WIDTH_4_DDR   </td><td class="markdownTableBodyLeft">Set the Bus data width to \token{4 bits}, DDR (Dual Data Rate) - MMC only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_BUS_DATA_WIDTH_8_DDR   </td><td class="markdownTableBodyLeft">Set the Bus data width to \token{8 bits}, DDR (Dual Data Rate) - MMC only   </td></tr>
</table>
<p><b>Driver Type</b></p>
<p>Specifies the interface driver type.</p>
<p>The <em>control</em> operation <b>ARM_MCI_DRIVER_STRENGTH</b> sets the interface driver type using the parameter <em>arg</em>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>arg</em>   </th><th class="markdownTableHeadLeft">Driver Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_DRIVER_TYPE_A   </td><td class="markdownTableBodyLeft">Set the interface to SD UHS-I Driver Type A    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_DRIVER_TYPE_B (default)   </td><td class="markdownTableBodyLeft">Set the interface to SD UHS-I Driver Type B    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_DRIVER_TYPE_C   </td><td class="markdownTableBodyLeft">Set the interface to SD UHS-I Driver Type C    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_DRIVER_TYPE_D   </td><td class="markdownTableBodyLeft">Set the interface to SD UHS-I Driver Type D   </td></tr>
</table>
<p><b>Examples:</b> </p><div class="fragment"><div class="line"><span class="comment">// Set Bus Speed to 25MHz</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_BUS_SPEED, 25000000);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set High Speed mode</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_BUS_SPEED_MODE, ARM_MCI_BUS_HIGH_SPEED);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Configure CMD line as Open Drain (MMC only)</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_BUS_CMD_MODE, ARM_MCI_BUS_CMD_OPEN_DRAIN);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set Bus Data Width = 4bits</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_BUS_DATA_WIDTH, ARM_MCI_BUS_DATA_WIDTH_4);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set SD UHS-I Driver Type B</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_DRIVER_STRENGTH, ARM_MCI_DRIVER_TYPE_B);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// RTS_n Pin is not active by default</span></div>
<div class="line"><span class="comment">// Assert RTS_n Pin (eMMC)</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_CONTROL_RESET, 1);</div>
<div class="line"><span class="comment">// De-assert RTS_n Pin (eMMC)</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_CONTROL_RESET, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Clock generation on CLK when Idle: hardware specific default behavior</span></div>
<div class="line"><span class="comment">// Enable Clock generation on CLK when Idle</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_CONTROL_CLOCK_IDLE, 1);</div>
<div class="line"><span class="comment">// Disable Clock generation on CLK when Idle</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_CONTROL_CLOCK_IDLE, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// UHS Tuning</span></div>
<div class="line">MCIdrv-&gt;Control(<a class="code" href="group__mci__mode__ctrls.html#ga98853f60bdc085aeeccd66f7bdf22d3d">ARM_MCI_UHS_TUNING_OPERATION</a>, 1);  <span class="comment">// start tuning</span></div>
<div class="line"><span class="keywordflow">do</span> {</div>
<div class="line">  status = MCIdrv-&gt;Control(<a class="code" href="group__mci__mode__ctrls.html#gabd3af448e26da5657c1c5a03330476b7">ARM_MCI_UHS_TUNING_RESULT</a>, 0<span class="comment">/*argument not used*/</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (status == -1) { <span class="keywordflow">break</span>; <span class="comment">/* tuning failed */</span> }</div>
<div class="line">} <span class="keywordflow">while</span> (status == 1);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set Data Timeout to 12500000 bus cycles (0.5s @25MHz Bus Speed)</span></div>
<div class="line"><span class="comment">// Default value is hardware specific (typically 2^32-1)</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_DATA_TIMEOUT, 12500000);</div>
<div class="line">  </div>
<div class="line"><span class="comment">// Set CSS Timeout to 1000000 bus cycles</span></div>
<div class="line"><span class="comment">// Default value is hardware specific</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_CSS_TIMEOUT, 1000000);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// SD I/O Interrupt Monitoring is disabled by default</span></div>
<div class="line"><span class="comment">// Enable SD I/O Interrupt Monitoring</span></div>
<div class="line">MCIdrv-&gt;Control(<a class="code" href="group__mci__mode__ctrls.html#ga19fd7d3b74ac48ca74a2e138b3ee9963">ARM_MCI_MONITOR_SDIO_INTERRUPT</a>, 1);</div>
<div class="line"><span class="comment">// Disable SD I/O Interrupt Monitoring</span></div>
<div class="line">MCIdrv-&gt;Control(<a class="code" href="group__mci__mode__ctrls.html#ga19fd7d3b74ac48ca74a2e138b3ee9963">ARM_MCI_MONITOR_SDIO_INTERRUPT</a>, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Read/Wait for SD I/O is disabled by default</span></div>
<div class="line"><span class="comment">// Enable Read/Wait for SD I/O</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_CONTROL_READ_WAIT, 1);</div>
<div class="line"><span class="comment">// Disable Read/Wait for SD I/O</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_CONTROL_READ_WAIT, 0);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Suspend Data transfer (SD I/O)</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_SUSPEND_TRANSFER, 0<span class="comment">/*argument not used*/</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Resume Data transfer (SD I/O)</span></div>
<div class="line">MCIdrv-&gt;Control(ARM_MCI_RESUME_TRANSFER, 0<span class="comment">/*argument not used*/</span>);</div>
<div class="ttc" id="agroup__mci__mode__ctrls_html_ga19fd7d3b74ac48ca74a2e138b3ee9963"><div class="ttname"><a href="group__mci__mode__ctrls.html#ga19fd7d3b74ac48ca74a2e138b3ee9963">ARM_MCI_MONITOR_SDIO_INTERRUPT</a></div><div class="ttdeci">#define ARM_MCI_MONITOR_SDIO_INTERRUPT</div><div class="ttdoc">Monitor SD I/O interrupt: arg: 0=disabled, 1=enabled.</div><div class="ttdef"><b>Definition:</b> Driver_MCI.h:128</div></div>
<div class="ttc" id="agroup__mci__mode__ctrls_html_ga98853f60bdc085aeeccd66f7bdf22d3d"><div class="ttname"><a href="group__mci__mode__ctrls.html#ga98853f60bdc085aeeccd66f7bdf22d3d">ARM_MCI_UHS_TUNING_OPERATION</a></div><div class="ttdeci">#define ARM_MCI_UHS_TUNING_OPERATION</div><div class="ttdoc">Sampling clock Tuning operation (SD UHS-I); arg: 0=reset, 1=execute.</div><div class="ttdef"><b>Definition:</b> Driver_MCI.h:124</div></div>
<div class="ttc" id="agroup__mci__mode__ctrls_html_gabd3af448e26da5657c1c5a03330476b7"><div class="ttname"><a href="group__mci__mode__ctrls.html#gabd3af448e26da5657c1c5a03330476b7">ARM_MCI_UHS_TUNING_RESULT</a></div><div class="ttdeci">#define ARM_MCI_UHS_TUNING_RESULT</div><div class="ttdoc">Sampling clock Tuning result (SD UHS-I); returns: 0=done, 1=in progress, -1=error.</div><div class="ttdef"><b>Definition:</b> Driver_MCI.h:125</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">control</td><td>Operation </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Argument of operation (optional) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="ga7e5a78b6e6409189833a0b72a0a3c48a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7e5a78b6e6409189833a0b72a0a3c48a">&#9670;&nbsp;</a></span>ARM_MCI_GetCapabilities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_a_r_m___m_c_i___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_MCI_CAPABILITIES</a> ARM_MCI_GetCapabilities </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get driver capabilities. </p>
<p>The function <b>ARM_MCI_GetCapabilities</b> returns information about capabilities in this driver implementation. The data fields of the structure <a class="el" href="struct_a_r_m___m_c_i___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_MCI_CAPABILITIES</a> encode various capabilities, for example supported bus modes ...</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="keyword">extern</span> <a class="code" href="struct_a_r_m___d_r_i_v_e_r___m_c_i.html">ARM_DRIVER_MCI</a> Driver_MCI0;</div>
<div class="line"><a class="code" href="struct_a_r_m___d_r_i_v_e_r___m_c_i.html">ARM_DRIVER_MCI</a> *drv_info;</div>
<div class="line">  </div>
<div class="line"><span class="keywordtype">void</span> read_capabilities (<span class="keywordtype">void</span>)  {</div>
<div class="line">  <a class="code" href="struct_a_r_m___m_c_i___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_MCI_CAPABILITIES</a> drv_capabilities;</div>
<div class="line"> </div>
<div class="line">  drv_info = &amp;Driver_MCI0;  </div>
<div class="line">  drv_capabilities = drv_info-&gt;GetCapabilities ();</div>
<div class="line">  <span class="comment">// interrogate capabilities</span></div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="astruct_a_r_m___d_r_i_v_e_r___m_c_i_html"><div class="ttname"><a href="struct_a_r_m___d_r_i_v_e_r___m_c_i.html">ARM_DRIVER_MCI</a></div></div>
<div class="ttc" id="astruct_a_r_m___m_c_i___c_a_p_a_b_i_l_i_t_i_e_s_html"><div class="ttname"><a href="struct_a_r_m___m_c_i___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_MCI_CAPABILITIES</a></div></div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_a_r_m___m_c_i___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_MCI_CAPABILITIES</a> </dd></dl>

</div>
</div>
<a id="ga8d61aa42ce78d1864fa928c1f273cbd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d61aa42ce78d1864fa928c1f273cbd9">&#9670;&nbsp;</a></span>ARM_MCI_GetStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_a_r_m___m_c_i___s_t_a_t_u_s.html">ARM_MCI_STATUS</a> ARM_MCI_GetStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get MCI status. </p>
<p>The function <b>ARM_MCI_GetStatus</b> returns the current MCI interface status.</p>
<dl class="section return"><dt>Returns</dt><dd>MCI status <a class="el" href="struct_a_r_m___m_c_i___s_t_a_t_u_s.html">ARM_MCI_STATUS</a> </dd></dl>

</div>
</div>
<a id="ga3418183015dbf3025b94eebaedb00ab1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3418183015dbf3025b94eebaedb00ab1">&#9670;&nbsp;</a></span>ARM_MCI_GetVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a> ARM_MCI_GetVersion </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get driver version. </p>
<p>The function <b>ARM_MCI_GetVersion</b> returns version information of the driver implementation in <a class="el" href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a></p><ul>
<li>API version is the version of the CMSIS-Driver specification used to implement this driver.</li>
<li>Driver version is source code version of the actual driver implementation.</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line"><span class="keyword">extern</span> <a class="code" href="struct_a_r_m___d_r_i_v_e_r___m_c_i.html">ARM_DRIVER_MCI</a> Driver_MCI0;</div>
<div class="line"><a class="code" href="struct_a_r_m___d_r_i_v_e_r___m_c_i.html">ARM_DRIVER_MCI</a> *drv_info;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup_mci (<span class="keywordtype">void</span>)  {</div>
<div class="line">  <a class="code" href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a>  version;</div>
<div class="line"> </div>
<div class="line">  drv_info = &amp;Driver_MCI0;</div>
<div class="line">  version = drv_info-&gt;GetVersion ();</div>
<div class="line">  <span class="keywordflow">if</span> (version.api &lt; 0x10A)   {      <span class="comment">// requires at minimum API version 1.10 or higher</span></div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="astruct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n_html"><div class="ttname"><a href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a></div></div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd><a class="el" href="struct_a_r_m___d_r_i_v_e_r___v_e_r_s_i_o_n.html">ARM_DRIVER_VERSION</a> </dd></dl>

</div>
</div>
<a id="ga6f34d4ab362e596ddaf23aac093268cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6f34d4ab362e596ddaf23aac093268cf">&#9670;&nbsp;</a></span>ARM_MCI_Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_MCI_Initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mci__interface__gr.html#ga0d14651f6788c1ffd81544602565faf1">ARM_MCI_SignalEvent_t</a>&#160;</td>
          <td class="paramname"><em>cb_event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the Memory Card Interface. </p>
<p>The function <b>ARM_MCI_Initialize</b> initializes the MCI interface. It is called when the middleware component starts operation.</p>
<p>The function performs the following operations:</p><ul>
<li>Initializes the resources needed for the MCI interface.</li>
<li>Registers the <a class="el" href="group__mci__interface__gr.html#gaac2dbd1c1a98436938c5d0d6248cb700">ARM_MCI_SignalEvent</a> callback function.</li>
</ul>
<p>The parameter <em>cb_event</em> is a pointer to the <a class="el" href="group__mci__interface__gr.html#gaac2dbd1c1a98436938c5d0d6248cb700">ARM_MCI_SignalEvent</a> callback function; use a NULL pointer when no callback signals are required.</p>
<p><b>Example:</b> </p><ul>
<li>see <a class="el" href="group__mci__interface__gr.html">MCI Interface</a> - Driver Functions</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb_event</td><td>Pointer to <a class="el" href="group__mci__interface__gr.html#gaac2dbd1c1a98436938c5d0d6248cb700">ARM_MCI_SignalEvent</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="ga19752749d04ed22dc91c4294645e0244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga19752749d04ed22dc91c4294645e0244">&#9670;&nbsp;</a></span>ARM_MCI_PowerControl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_MCI_PowerControl </td>
          <td>(</td>
          <td class="paramtype">ARM_POWER_STATE&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control Memory Card Interface Power. </p>
<p><br  />
 The function <b>ARM_MCI_PowerControl</b> operates the power modes of the MCI interface. <br  />
</p>
<p>The parameter <em>state</em> can have the following values:</p><ul>
<li>ARM_POWER_FULL : set-up peripheral for data transfers, enable interrupts (NVIC) and optionally DMA. Can be called multiple times. If the peripheral is already in this mode, then the function performs no operation and returns with <a class="el" href="group__execution__status.html#ga85752c5de59e8adeb001e35ff5be6be7">ARM_DRIVER_OK</a>.</li>
<li>ARM_POWER_LOW : may use power saving. Returns <a class="el" href="group__execution__status.html#ga2efa59e480d82697795439220e6884e4">ARM_DRIVER_ERROR_UNSUPPORTED</a> when not implemented.</li>
<li>ARM_POWER_OFF : terminates any pending data transfers, disables peripheral, disables related interrupts and DMA.</li>
</ul>
<p>Refer to CallSequence for more information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>Power state ARM_POWER_STATE </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="ga012fca8f1ce5366fce14b708c771c635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga012fca8f1ce5366fce14b708c771c635">&#9670;&nbsp;</a></span>ARM_MCI_ReadCD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_MCI_ReadCD </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read Card Detect (CD) state. </p>
<p>The function <b>ARM_MCI_ReadCD</b> reads the status of the Card Detect (CD) pin.</p>
<dl class="section return"><dt>Returns</dt><dd>1:card detected, 0:card not detected, or error </dd></dl>

</div>
</div>
<a id="ga3d70286918405ac81fa795c7d09dc6fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3d70286918405ac81fa795c7d09dc6fd">&#9670;&nbsp;</a></span>ARM_MCI_ReadWP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_MCI_ReadWP </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read Write Protect (WP) state. </p>
<p>The function <b>ARM_MCI_ReadWP</b> reads the status of the Write Protect (WP) pin.</p>
<dl class="section return"><dt>Returns</dt><dd>1:write protected, 0:not write protected, or error </dd></dl>

</div>
</div>
<a id="ga5a431da89feabc2b4bc0c27943dff6f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5a431da89feabc2b4bc0c27943dff6f2">&#9670;&nbsp;</a></span>ARM_MCI_SendCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_MCI_SendCommand </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send Command to card and get the response. </p>
<p>The function <b>ARM_MCI_SendCommand</b> </p><ul>
<li>sends commands to the memory card</li>
<li>retrieve the response from the card</li>
<li>optionally, start the data transfer.</li>
</ul>
<p>The parameter <em>cmd</em> is the command sent to the card. <br  />
The parameter <em>arg</em> contains arguments for the command <em>cmd</em>. <br  />
The parameter <em>flags</em> controls the behavior of the operation and takes predefined values listed in the table below. <br  />
The parameter <em>response</em> is a pointer to receive data.</p>
<p>The parameter <em>flags</em> can have the following values:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>flags</em>   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_RESPONSE_NONE   </td><td class="markdownTableBodyLeft">No response expected (default)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_RESPONSE_SHORT   </td><td class="markdownTableBodyLeft">Short response (\token{48}-bit) expected    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_RESPONSE_SHORT_BUSY   </td><td class="markdownTableBodyLeft">Short response with busy signal (\token{48}-bit) expected    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_RESPONSE_LONG   </td><td class="markdownTableBodyLeft">Long response (\token{136}-bit) expected    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_RESPONSE_INDEX   </td><td class="markdownTableBodyLeft">Check command index in response    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_RESPONSE_CRC   </td><td class="markdownTableBodyLeft">Check CRC in response    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_WAIT_BUSY   </td><td class="markdownTableBodyLeft">Wait until busy before sending the command    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_TRANSFER_DATA   </td><td class="markdownTableBodyLeft">Activate Data transfer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_CARD_INITIALIZE   </td><td class="markdownTableBodyLeft">Execute Memory Card initialization sequence    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_INTERRUPT_COMMAND   </td><td class="markdownTableBodyLeft">Send Interrupt command (CMD40 - MMC only)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_INTERRUPT_RESPONSE   </td><td class="markdownTableBodyLeft">Send Interrupt response (CMD40 - MMC only)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_BOOT_OPERATION   </td><td class="markdownTableBodyLeft">Execute Boot operation (MMC only)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_BOOT_ALTERNATIVE   </td><td class="markdownTableBodyLeft">Execute Alternative Boot operation (MMC only)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_BOOT_ACK   </td><td class="markdownTableBodyLeft">Expect Boot Acknowledge (MMC only)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_CCSD   </td><td class="markdownTableBodyLeft">Send Command Completion Signal Disable (CCSD) for CE-ATA device    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_CCS   </td><td class="markdownTableBodyLeft">Expect Command Completion Signal (CCS) for CE-ATA device   </td></tr>
</table>
<p>Calling the function <b>ARM_MCI_SendCommand</b> only starts the operation. The function is non-blocking and returns as soon as the driver has started the operation. It is not allowed to call this function again until the operation is in progress.</p>
<p>After the command is sent the response is retrieved if specified with <b>ARM_MCI_RESPONSE_xxx</b> flags. When the command completes successfully (requested response is received without errors) the <a class="el" href="group__mci__event__gr.html#gae69356c75d55103d93ef91ac1bc02b49">ARM_MCI_EVENT_COMMAND_COMPLETE</a> event is generated. In case that response is requested but not received the ARM_MCI_EVENT_COMMAND_TIMEOUT event is generated instead. In case of invalid response (or CRC error) the ARM_MCI_EVENT_COMMAND_ERROR event is generated instead. Progress of command operation can be monitored by calling the <a class="el" href="group__mci__interface__gr.html#ga8d61aa42ce78d1864fa928c1f273cbd9">ARM_MCI_GetStatus</a> and checking the <em>command_active</em> flag.</p>
<p>After the command operation the data transfer operation is started if specified with <b>ARM_MCI_TRANSFER_DATA</b> flag. The data transfer needs to be configured before that by calling the <a class="el" href="group__mci__interface__gr.html#gaaec681bcd8e6811c5743e33ee0f35ed1">ARM_MCI_SetupTransfer</a>. When the data transfer completes successfully the <a class="el" href="group__mci__event__gr.html#gabc3c468dedaed890683360f2c5c65bea">ARM_MCI_EVENT_TRANSFER_COMPLETE</a> event is generated. In case that data transfer is not completed in-time (specified by ARM_MCI_DATA_TIMEOUT) the <a class="el" href="group__mci__event__gr.html#ga614e7c7226adbaa8ec4165bf8b87ef27">ARM_MCI_EVENT_TRANSFER_TIMEOUT</a> event is generated instead. In case of CRC errors the ARM_MCI_EVENT_TRANSFER_ERROR event is generated instead. Progress of data transfer operation can be monitored by calling the <a class="el" href="group__mci__interface__gr.html#ga8d61aa42ce78d1864fa928c1f273cbd9">ARM_MCI_GetStatus</a> and checking the <em>transfer_active</em> flag.</p>
<p><b>See also:</b></p><ul>
<li><a class="el" href="group__mci__interface__gr.html#gaac2dbd1c1a98436938c5d0d6248cb700">ARM_MCI_SignalEvent</a></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>Memory Card command </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Command argument </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Command flags </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>Pointer to buffer for response </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="gaaec681bcd8e6811c5743e33ee0f35ed1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaec681bcd8e6811c5743e33ee0f35ed1">&#9670;&nbsp;</a></span>ARM_MCI_SetupTransfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_MCI_SetupTransfer </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>block_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>block_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup read or write transfer operation. </p>
<p>The function <b>ARM_MCI_SetupTransfer</b> prepares the data transfer operation that is initiated by calling the function <a class="el" href="group__mci__interface__gr.html#ga5a431da89feabc2b4bc0c27943dff6f2">ARM_MCI_SendCommand</a> with the parameter <em>flags</em> = ARM_MCI_TRANSFER_DATA.</p>
<p>The parameter <em>data</em> is a pointer to the data to transfer. <br  />
The parameter <em>block_count</em> is the number of blocks to transfer. <br  />
The parameter <em>block_size</em> is the size of a block. <br  />
The parameter <em>mode</em> sets the transfer mode and can have the values liste in the table below:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Transfer Directions   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_TRANSFER_READ   </td><td class="markdownTableBodyLeft">Read data from MCI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_TRANSFER_WRITE   </td><td class="markdownTableBodyLeft">Write data to MCI    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_TRANSFER_BLOCK (default)   </td><td class="markdownTableBodyLeft">Block Data transfer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_TRANSFER_STREAM   </td><td class="markdownTableBodyLeft">Stream Data transfer (MMC only)   </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">data</td><td>Pointer to data block(s) to be written or read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">block_count</td><td>Number of blocks </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">block_size</td><td>Size of a block in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Transfer mode </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
<a id="gaac2dbd1c1a98436938c5d0d6248cb700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac2dbd1c1a98436938c5d0d6248cb700">&#9670;&nbsp;</a></span>ARM_MCI_SignalEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ARM_MCI_SignalEvent </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function that signals a MCI Card Event. </p>
<p>The function <b>ARM_MCI_SignalEvent</b> is a callback function registered by the function <a class="el" href="group__mci__interface__gr.html#ga6f34d4ab362e596ddaf23aac093268cf">ARM_MCI_Initialize</a>.</p>
<p>The parameter <em>event</em> indicates one or more events that occurred during driver operation. Each event is encoded in a separate bit and therefore it is possible to signal multiple events within the same call.</p>
<p>Not every event is necessarily generated by the driver. This depends on the implemented capabilities stored in the data fields of the structure <a class="el" href="struct_a_r_m___n_a_n_d___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_NAND_CAPABILITIES</a>, which can be retrieved with the function <a class="el" href="group__nand__interface__gr.html#ga9f2609975c2008d21b9ae28f15daf147">ARM_NAND_GetCapabilities</a>.</p>
<p>The following events can be generated:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Parameter <em>event</em>   </th><th class="markdownTableHeadRight">Bit   </th><th class="markdownTableHeadLeft">Description   </th><th class="markdownTableHeadLeft">supported when <a class="el" href="struct_a_r_m___n_a_n_d___c_a_p_a_b_i_l_i_t_i_e_s.html">ARM_NAND_CAPABILITIES</a>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_EVENT_CARD_INSERTED   </td><td class="markdownTableBodyRight">0   </td><td class="markdownTableBodyLeft">Occurs after Memory Card inserted   </td><td class="markdownTableBodyLeft"><em>always supported</em>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_EVENT_CARD_REMOVED   </td><td class="markdownTableBodyRight">1   </td><td class="markdownTableBodyLeft">Occurs after Memory Card removal   </td><td class="markdownTableBodyLeft"><em>always supported</em>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__mci__event__gr.html#gae69356c75d55103d93ef91ac1bc02b49">ARM_MCI_EVENT_COMMAND_COMPLETE</a>   </td><td class="markdownTableBodyRight">2   </td><td class="markdownTableBodyLeft">Occurs after command completed successfully   </td><td class="markdownTableBodyLeft"><em>always supported</em>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_EVENT_COMMAND_TIMEOUT   </td><td class="markdownTableBodyRight">3   </td><td class="markdownTableBodyLeft">Occurs after command timeout   </td><td class="markdownTableBodyLeft"><em>always supported</em>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_EVENT_COMMAND_ERROR   </td><td class="markdownTableBodyRight">4   </td><td class="markdownTableBodyLeft">Occurs after command response error (CRC error or invalid response)   </td><td class="markdownTableBodyLeft"><em>always supported</em>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><a class="el" href="group__mci__event__gr.html#gabc3c468dedaed890683360f2c5c65bea">ARM_MCI_EVENT_TRANSFER_COMPLETE</a>   </td><td class="markdownTableBodyRight">5   </td><td class="markdownTableBodyLeft">Occurs after data transfer completed successfully   </td><td class="markdownTableBodyLeft"><em>always supported</em>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="group__mci__event__gr.html#ga614e7c7226adbaa8ec4165bf8b87ef27">ARM_MCI_EVENT_TRANSFER_TIMEOUT</a>   </td><td class="markdownTableBodyRight">6   </td><td class="markdownTableBodyLeft">Occurs after data transfer timeout   </td><td class="markdownTableBodyLeft"><em>always supported</em>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_EVENT_TRANSFER_ERROR   </td><td class="markdownTableBodyRight">7   </td><td class="markdownTableBodyLeft">Occurs after data transfer error (CRC failed)   </td><td class="markdownTableBodyLeft"><em>always supported</em>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_EVENT_SDIO_INTERRUPT   </td><td class="markdownTableBodyRight">8   </td><td class="markdownTableBodyLeft">Indicates SD I/O Interrupt   </td><td class="markdownTableBodyLeft">data field <em>sdio_interrupt</em> = \token{1}    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ARM_MCI_EVENT_CCS   </td><td class="markdownTableBodyRight">9   </td><td class="markdownTableBodyLeft">Indicates a Command Completion Signal (CCS)   </td><td class="markdownTableBodyLeft">data field <em>ccs</em> = \token{1}    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">ARM_MCI_EVENT_CCS_TIMEOUT   </td><td class="markdownTableBodyRight">10   </td><td class="markdownTableBodyLeft">Indicates a Command Completion Signal (CCS) Timeout   </td><td class="markdownTableBodyLeft">data field <em>css_timeout</em> = \token{1}   </td></tr>
</table>
<p><b>See also:</b></p><ul>
<li><a class="el" href="group__mci__interface__gr.html#ga5a431da89feabc2b4bc0c27943dff6f2">ARM_MCI_SendCommand</a></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td><a class="el" href="group__mci__event__gr.html">MCI Events</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="gaef8183e77797e74997551d03646d42c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaef8183e77797e74997551d03646d42c2">&#9670;&nbsp;</a></span>ARM_MCI_Uninitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ARM_MCI_Uninitialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>De-initialize Memory Card Interface. </p>
<p>The function <b>ARM_MCI_Uninitialize</b> de-initializes the resources of I2C interface.</p>
<p>It is called when the middleware component stops operation and releases the software resources used by the interface.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__execution__status.html">Status Error Codes</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
